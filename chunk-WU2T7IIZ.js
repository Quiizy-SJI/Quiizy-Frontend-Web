import{a as y}from"./chunk-45LMPNY4.js";import{a as E}from"./chunk-GOGAD5UF.js";import"./chunk-SPLO5XSZ.js";import{a as b,b as S}from"./chunk-W67SSUM4.js";import{Ab as h,Ka as v,Lb as C,Nb as P,Z as x,ab as e,bb as t,cb as m,lb as M,mc as _,nc as O,p,yb as n,za as l,zb as u}from"./chunk-XVADYIPR.js";var w=class f{teacherApi=x(E);stats={totalStudents:0,totalExams:0,averageScore:0,avgDuration:0};quizzes=[];courses=[];isLoading=!0;scoreDistribution={excellent:{count:0,percentage:0},good:{count:0,percentage:0},average:{count:0,percentage:0},below:{count:0,percentage:0},failing:{count:0,percentage:0}};ngOnInit(){this.loadStatistics()}async loadStatistics(){this.isLoading=!0;try{let[a,o]=await Promise.all([p(this.teacherApi.getMyQuizzes()),p(this.teacherApi.getMyCourses())]);this.quizzes=a,this.courses=o,this.computeStats()}catch(a){console.error("Error loading statistics:",a)}finally{this.isLoading=!1}}computeStats(){this.stats.totalExams=this.quizzes.length;let a=new Set,o=0,i=0,r=0,c=0;for(let g of this.quizzes)if(c+=g.durationMinutes||0,g.studentQuizes){for(let s of g.studentQuizes)if(s.student?.id&&a.add(s.student.id),s.rawScore!==null&&s.rawScore!==void 0&&s.totalMarks){o+=s.rawScore,i+=s.totalMarks,r++;let d=s.rawScore/s.totalMarks*100;d>=90?this.scoreDistribution.excellent.count++:d>=80?this.scoreDistribution.good.count++:d>=70?this.scoreDistribution.average.count++:d>=60?this.scoreDistribution.below.count++:this.scoreDistribution.failing.count++}}this.stats.totalStudents=a.size,this.stats.averageScore=i>0?o/i*100:0,this.stats.avgDuration=this.quizzes.length>0?Math.round(c/this.quizzes.length):0,r>0&&(this.scoreDistribution.excellent.percentage=this.scoreDistribution.excellent.count/r*100,this.scoreDistribution.good.percentage=this.scoreDistribution.good.count/r*100,this.scoreDistribution.average.percentage=this.scoreDistribution.average.count/r*100,this.scoreDistribution.below.percentage=this.scoreDistribution.below.count/r*100,this.scoreDistribution.failing.percentage=this.scoreDistribution.failing.count/r*100)}exportData(){console.log("Exporting statistics data");let a={stats:this.stats,quizzes:this.quizzes.map(c=>({id:c.id,type:c.type,date:c.date,duration:c.durationMinutes,questionsCount:y(c),studentsCount:c.studentQuizes?.length||0}))},o=new Blob([JSON.stringify(a,null,2)],{type:"application/json"}),i=URL.createObjectURL(o),r=document.createElement("a");r.href=i,r.download=`teacher-statistics-${new Date().toISOString().split("T")[0]}.json`,r.click(),URL.revokeObjectURL(i)}static \u0275fac=function(o){return new(o||f)};static \u0275cmp=v({type:f,selectors:[["app-teacher-statistics"]],decls:267,vars:7,consts:[[1,"statistics"],[1,"page-header"],[1,"stats-overview"],[1,"overview-card"],[1,"card-icon"],[1,"card-content"],[1,"main-stat"],[1,"trend","neutral"],[1,"analytics-grid"],[1,"chart-section"],[1,"chart-card"],[1,"chart-header"],[1,"time-filter"],[1,"chart-placeholder"],[1,"export-btn",3,"click"],[1,"score-distribution"],[1,"score-range"],[1,"range-label"],[1,"range-bar"],[1,"range-fill","excellent",2,"width","25%"],[1,"range-count"],[1,"range-fill","good",2,"width","35%"],[1,"range-fill","average",2,"width","28%"],[1,"range-fill","below",2,"width","12%"],[1,"insights-section"],[1,"insights-card"],[1,"insights-list"],[1,"insight-item"],[1,"insight-icon","positive"],[1,"insight-content"],[1,"insight-icon","warning"],[1,"insight-icon","info"],[1,"top-performers-card"],[1,"performers-list"],[1,"performer-item"],[1,"performer-rank"],[1,"performer-info"],[1,"performer-name"],[1,"performer-score"],[1,"detailed-analytics"],[1,"analytics-card"],[1,"card-header"],[1,"header-actions"],[1,"subject-filter"],[1,"subject-stats"],[1,"subject-stat"],[1,"subject-info"],[1,"subject-name"],[1,"subject-exams"],[1,"subject-metrics"],[1,"metric"],[1,"metric-label"],[1,"metric-value"],[1,"metric-value","difficulty-medium"],[1,"metric-value","difficulty-hard"]],template:function(o,i){o&1&&(e(0,"div",0)(1,"div",1)(2,"h1"),n(3,"Statistics & Analytics"),t(),e(4,"p"),n(5,"Comprehensive insights into student performance and exam analytics."),t()(),e(6,"div",2)(7,"div",3)(8,"div",4)(9,"mat-icon"),n(10,"groups"),t()(),e(11,"div",5)(12,"h3"),n(13,"Total Students"),t(),e(14,"p",6),n(15),t(),e(16,"span",7),n(17,"Across all quizzes"),t()()(),e(18,"div",3)(19,"div",4)(20,"mat-icon"),n(21,"assignment"),t()(),e(22,"div",5)(23,"h3"),n(24,"Exams Conducted"),t(),e(25,"p",6),n(26),t(),e(27,"span",7),n(28,"Total created"),t()()(),e(29,"div",3)(30,"div",4)(31,"mat-icon"),n(32,"trending_up"),t()(),e(33,"div",5)(34,"h3"),n(35,"Average Score"),t(),e(36,"p",6),n(37),C(38,"number"),t(),e(39,"span",7),n(40,"Overall performance"),t()()(),e(41,"div",3)(42,"div",4)(43,"mat-icon"),n(44,"schedule"),t()(),e(45,"div",5)(46,"h3"),n(47,"Avg Duration"),t(),e(48,"p",6),n(49),t(),e(50,"span",7),n(51,"Exam duration"),t()()()(),e(52,"div",8)(53,"div",9)(54,"div",10)(55,"div",11)(56,"h3"),n(57,"Performance Trends"),t(),e(58,"select",12)(59,"option"),n(60,"Last 30 days"),t(),e(61,"option"),n(62,"Last 3 months"),t(),e(63,"option"),n(64,"Last 6 months"),t(),e(65,"option"),n(66,"This year"),t()()(),e(67,"div",13)(68,"mat-icon"),n(69,"show_chart"),t(),e(70,"p"),n(71,"Performance trend chart would be displayed here"),t()()(),e(72,"div",10)(73,"div",11)(74,"h3"),n(75,"Score Distribution"),t(),e(76,"button",14),M("click",function(){return i.exportData()}),e(77,"mat-icon"),n(78,"file_download"),t(),n(79," Export "),t()(),e(80,"div",15)(81,"div",16)(82,"span",17),n(83,"90-100%"),t(),e(84,"div",18),m(85,"div",19),t(),e(86,"span",20),n(87,"62 students"),t()(),e(88,"div",16)(89,"span",17),n(90,"80-89%"),t(),e(91,"div",18),m(92,"div",21),t(),e(93,"span",20),n(94,"87 students"),t()(),e(95,"div",16)(96,"span",17),n(97,"70-79%"),t(),e(98,"div",18),m(99,"div",22),t(),e(100,"span",20),n(101,"69 students"),t()(),e(102,"div",16)(103,"span",17),n(104,"60-69%"),t(),e(105,"div",18),m(106,"div",23),t(),e(107,"span",20),n(108,"30 students"),t()()()()(),e(109,"div",24)(110,"div",25)(111,"h3"),n(112,"Key Insights"),t(),e(113,"div",26)(114,"div",27)(115,"div",28)(116,"mat-icon"),n(117,"trending_up"),t()(),e(118,"div",29)(119,"h4"),n(120,"Improved Performance"),t(),e(121,"p"),n(122,"Mathematics scores increased by 15% after implementing practice tests."),t()()(),e(123,"div",27)(124,"div",30)(125,"mat-icon"),n(126,"warning"),t()(),e(127,"div",29)(128,"h4"),n(129,"Attention Needed"),t(),e(130,"p"),n(131,"Physics concepts show consistent low scores across multiple exams."),t()()(),e(132,"div",27)(133,"div",31)(134,"mat-icon"),n(135,"lightbulb"),t()(),e(136,"div",29)(137,"h4"),n(138,"Recommendation"),t(),e(139,"p"),n(140,"Consider shorter exam durations to improve completion rates."),t()()()()(),e(141,"div",32)(142,"h3"),n(143,"Top Performers"),t(),e(144,"div",33)(145,"div",34)(146,"div",35),n(147,"1"),t(),e(148,"div",36)(149,"span",37),n(150,"Sarah Johnson"),t(),e(151,"span",38),n(152,"94.5%"),t()()(),e(153,"div",34)(154,"div",35),n(155,"2"),t(),e(156,"div",36)(157,"span",37),n(158,"Michael Chen"),t(),e(159,"span",38),n(160,"92.8%"),t()()(),e(161,"div",34)(162,"div",35),n(163,"3"),t(),e(164,"div",36)(165,"span",37),n(166,"Emma Davis"),t(),e(167,"span",38),n(168,"91.2%"),t()()(),e(169,"div",34)(170,"div",35),n(171,"4"),t(),e(172,"div",36)(173,"span",37),n(174,"James Wilson"),t(),e(175,"span",38),n(176,"89.7%"),t()()(),e(177,"div",34)(178,"div",35),n(179,"5"),t(),e(180,"div",36)(181,"span",37),n(182,"Lisa Anderson"),t(),e(183,"span",38),n(184,"88.9%"),t()()()()()()(),e(185,"div",39)(186,"div",40)(187,"div",41)(188,"h3"),n(189,"Subject Performance Breakdown"),t(),e(190,"div",42)(191,"select",43)(192,"option"),n(193,"All Subjects"),t(),e(194,"option"),n(195,"Mathematics"),t(),e(196,"option"),n(197,"Physics"),t(),e(198,"option"),n(199,"Chemistry"),t()()()(),e(200,"div",44)(201,"div",45)(202,"div",46)(203,"span",47),n(204,"Mathematics"),t(),e(205,"span",48),n(206,"15 exams"),t()(),e(207,"div",49)(208,"div",50)(209,"span",51),n(210,"Avg Score"),t(),e(211,"span",52),n(212,"82.3%"),t()(),e(213,"div",50)(214,"span",51),n(215,"Completion"),t(),e(216,"span",52),n(217,"94%"),t()(),e(218,"div",50)(219,"span",51),n(220,"Difficulty"),t(),e(221,"span",53),n(222,"Medium"),t()()()(),e(223,"div",45)(224,"div",46)(225,"span",47),n(226,"Physics"),t(),e(227,"span",48),n(228,"12 exams"),t()(),e(229,"div",49)(230,"div",50)(231,"span",51),n(232,"Avg Score"),t(),e(233,"span",52),n(234,"74.8%"),t()(),e(235,"div",50)(236,"span",51),n(237,"Completion"),t(),e(238,"span",52),n(239,"89%"),t()(),e(240,"div",50)(241,"span",51),n(242,"Difficulty"),t(),e(243,"span",54),n(244,"Hard"),t()()()(),e(245,"div",45)(246,"div",46)(247,"span",47),n(248,"Chemistry"),t(),e(249,"span",48),n(250,"18 exams"),t()(),e(251,"div",49)(252,"div",50)(253,"span",51),n(254,"Avg Score"),t(),e(255,"span",52),n(256,"78.9%"),t()(),e(257,"div",50)(258,"span",51),n(259,"Completion"),t(),e(260,"span",52),n(261,"91%"),t()(),e(262,"div",50)(263,"span",51),n(264,"Difficulty"),t(),e(265,"span",53),n(266,"Medium"),t()()()()()()()()),o&2&&(l(15),u(i.stats.totalStudents),l(11),u(i.stats.totalExams),l(11),h("",P(38,4,i.stats.averageScore,"1.1-1"),"%"),l(12),h("",i.stats.avgDuration," min"))},dependencies:[O,S,b,_],styles:[".statistics[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}.page-header[_ngcontent-%COMP%]{margin-bottom:2rem}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:600;margin-bottom:.5rem;color:var(--color-text-primary)}.page-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--color-text-secondary);font-size:1rem}.stats-overview[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1.5rem;margin-bottom:2rem}.overview-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1.5rem;box-shadow:0 2px 8px #0000001a;display:flex;align-items:center;gap:1rem}.overview-card[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{background:var(--color-primary-50);border-radius:12px;padding:1rem;display:flex;align-items:center;justify-content:center}.overview-card[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--color-primary-600);font-size:1.5rem;width:1.5rem;height:1.5rem}.overview-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{flex:1}.overview-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--color-text-secondary);margin-bottom:.25rem}.overview-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .main-stat[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;color:var(--color-text-primary);margin-bottom:.25rem}.overview-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .trend[_ngcontent-%COMP%]{font-size:.75rem;font-weight:500}.overview-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .trend.positive[_ngcontent-%COMP%]{color:var(--color-success-600)}.overview-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .trend.negative[_ngcontent-%COMP%]{color:var(--color-error-600)}.analytics-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr;gap:2rem;margin-bottom:2rem}@media (max-width: 1024px){.analytics-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.chart-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.chart-card[_ngcontent-%COMP%], .insights-card[_ngcontent-%COMP%], .top-performers-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1.5rem;box-shadow:0 2px 8px #0000001a}.chart-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem}.chart-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:var(--color-text-primary)}.time-filter[_ngcontent-%COMP%], .subject-filter[_ngcontent-%COMP%]{padding:.5rem .75rem;border:1px solid var(--color-border);border-radius:6px;font-size:.875rem}.export-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem;padding:.5rem .75rem;background:var(--color-primary-600);color:#fff;border:none;border-radius:6px;font-size:.875rem;cursor:pointer;transition:background .2s}.export-btn[_ngcontent-%COMP%]:hover{background:var(--color-primary-700)}.chart-placeholder[_ngcontent-%COMP%]{height:300px;border:2px dashed var(--color-border);border-radius:8px;display:flex;flex-direction:column;align-items:center;justify-content:center;color:var(--color-text-secondary)}.chart-placeholder[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:3rem;width:3rem;height:3rem;margin-bottom:.5rem}.score-distribution[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.score-range[_ngcontent-%COMP%]{display:grid;grid-template-columns:80px 1fr 100px;align-items:center;gap:1rem}.score-range[_ngcontent-%COMP%]   .range-label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--color-text-primary)}.score-range[_ngcontent-%COMP%]   .range-bar[_ngcontent-%COMP%]{height:8px;background:var(--color-background-muted);border-radius:4px;overflow:hidden}.score-range[_ngcontent-%COMP%]   .range-bar[_ngcontent-%COMP%]   .range-fill[_ngcontent-%COMP%]{height:100%;transition:width .3s}.score-range[_ngcontent-%COMP%]   .range-bar[_ngcontent-%COMP%]   .range-fill.excellent[_ngcontent-%COMP%]{background:var(--color-success-500)}.score-range[_ngcontent-%COMP%]   .range-bar[_ngcontent-%COMP%]   .range-fill.good[_ngcontent-%COMP%]{background:var(--color-primary-500)}.score-range[_ngcontent-%COMP%]   .range-bar[_ngcontent-%COMP%]   .range-fill.average[_ngcontent-%COMP%]{background:var(--color-warning-500)}.score-range[_ngcontent-%COMP%]   .range-bar[_ngcontent-%COMP%]   .range-fill.below[_ngcontent-%COMP%]{background:var(--color-error-500)}.score-range[_ngcontent-%COMP%]   .range-count[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-secondary);text-align:right}.insights-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.insights-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .top-performers-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;margin-bottom:1.5rem;color:var(--color-text-primary)}.insights-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.insight-item[_ngcontent-%COMP%]{display:flex;gap:.75rem}.insight-item[_ngcontent-%COMP%]   .insight-icon[_ngcontent-%COMP%]{padding:.5rem;border-radius:8px;display:flex;align-items:center;justify-content:center;flex-shrink:0}.insight-item[_ngcontent-%COMP%]   .insight-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.25rem;width:1.25rem;height:1.25rem}.insight-item[_ngcontent-%COMP%]   .insight-icon.positive[_ngcontent-%COMP%]{background:var(--color-success-100)}.insight-item[_ngcontent-%COMP%]   .insight-icon.positive[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--color-success-600)}.insight-item[_ngcontent-%COMP%]   .insight-icon.warning[_ngcontent-%COMP%]{background:var(--color-warning-100)}.insight-item[_ngcontent-%COMP%]   .insight-icon.warning[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--color-warning-600)}.insight-item[_ngcontent-%COMP%]   .insight-icon.info[_ngcontent-%COMP%]{background:var(--color-primary-100)}.insight-item[_ngcontent-%COMP%]   .insight-icon.info[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--color-primary-600)}.insight-item[_ngcontent-%COMP%]   .insight-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;margin-bottom:.25rem;color:var(--color-text-primary)}.insight-item[_ngcontent-%COMP%]   .insight-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-secondary);line-height:1.4}.performers-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.performer-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:.75rem;background:var(--color-background-subtle);border-radius:8px}.performer-item[_ngcontent-%COMP%]   .performer-rank[_ngcontent-%COMP%]{width:2rem;height:2rem;background:var(--color-primary-600);color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:600;font-size:.875rem}.performer-item[_ngcontent-%COMP%]   .performer-info[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:space-between;align-items:center}.performer-item[_ngcontent-%COMP%]   .performer-info[_ngcontent-%COMP%]   .performer-name[_ngcontent-%COMP%]{font-weight:500;color:var(--color-text-primary)}.performer-item[_ngcontent-%COMP%]   .performer-info[_ngcontent-%COMP%]   .performer-score[_ngcontent-%COMP%]{font-weight:600;color:var(--color-success-600)}.detailed-analytics[_ngcontent-%COMP%]{margin-bottom:2rem}.analytics-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1.5rem;box-shadow:0 2px 8px #0000001a}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem}.card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:var(--color-text-primary)}.subject-stats[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.subject-stat[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem;border:1px solid var(--color-border);border-radius:8px}@media (max-width: 768px){.subject-stat[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:1rem}}.subject-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.subject-info[_ngcontent-%COMP%]   .subject-name[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:var(--color-text-primary)}.subject-info[_ngcontent-%COMP%]   .subject-exams[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-secondary)}.subject-metrics[_ngcontent-%COMP%]{display:flex;gap:2rem}@media (max-width: 768px){.subject-metrics[_ngcontent-%COMP%]{gap:1rem}}.metric[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.metric[_ngcontent-%COMP%]   .metric-label[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-secondary);margin-bottom:.25rem}.metric[_ngcontent-%COMP%]   .metric-value[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:var(--color-text-primary)}.metric[_ngcontent-%COMP%]   .metric-value.difficulty-medium[_ngcontent-%COMP%]{color:var(--color-warning-600)}.metric[_ngcontent-%COMP%]   .metric-value.difficulty-hard[_ngcontent-%COMP%]{color:var(--color-error-600)}"]})};export{w as TeacherStatistics};
