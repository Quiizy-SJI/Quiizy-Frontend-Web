import{a as yt,b as St}from"./chunk-C46SVYZ2.js";import"./chunk-45LMPNY4.js";import"./chunk-GOGAD5UF.js";import{a as B}from"./chunk-I4WNHO3R.js";import{a as st}from"./chunk-Y5LGC6BU.js";import{a as Ct}from"./chunk-2FZ36ZB7.js";import{i as xt}from"./chunk-SPLO5XSZ.js";import{a as gt,d as ut,h as _t,l as ht,m as vt,o as ft,t as bt}from"./chunk-UUU7BI2K.js";import{c as ct,f as lt,n as dt}from"./chunk-XIAE3S6L.js";import{a as mt,b as pt}from"./chunk-W67SSUM4.js";import"./chunk-23TWDL4C.js";import"./chunk-5XPIWXNK.js";import{$a as l,Ab as g,Bb as tt,Cb as et,F as Q,Ka as J,Lb as M,Mb as F,Nb as L,P as X,Sb as v,U as W,Va as u,Wa as _,Wb as nt,Y as $,Z as x,Za as C,_a as y,a as R,ab as i,bb as e,cb as f,h as N,ha as V,i as U,ic as it,la as b,lb as j,lc as at,mc as rt,nb as p,nc as ot,p as Y,q,va as Z,x as H,xb as S,y as G,yb as a,z as K,za as o,zb as m}from"./chunk-XVADYIPR.js";var O=class r{constructor(t,n){this.config=t;this.authStore=n}eventSource=null;destroy$=new N;reconnectAttempts=0;lastOptions={reconnectDelayMs:3e3,maxReconnectAttempts:10};eventsSubject=new N;events$=this.eventsSubject.asObservable();connectionStateSubject=new U("disconnected");connectionState$=this.connectionStateSubject.asObservable();connect(t={}){this.disconnect(),this.lastOptions=R(R({},this.lastOptions),t),this.establishConnection()}disconnect(){this.eventSource&&(this.eventSource.close(),this.eventSource=null),this.connectionStateSubject.next("disconnected"),this.reconnectAttempts=0}on(...t){return this.events$.pipe(K(n=>t.includes(n.type)),q(n=>n))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.disconnect()}establishConnection(){let t=this.authStore.getAccessToken();if(!t){this.connectionStateSubject.next("error");return}this.connectionStateSubject.next("connecting");let n=this.buildUrl(t);try{this.eventSource=new EventSource(n),this.eventSource.onopen=()=>{this.connectionStateSubject.next("connected"),this.reconnectAttempts=0},this.eventSource.onerror=()=>{this.connectionStateSubject.next("error"),this.scheduleReconnect()},this.eventSource.onmessage=d=>this.handleMessage(d),new Set(["connected","heartbeat",...this.lastOptions.eventTypes??[]]).forEach(d=>{this.eventSource?.addEventListener(d,h=>{this.handleMessage(h)})}),G(H(0)).pipe(X(this.destroy$),Q(()=>{})).subscribe()}catch{this.connectionStateSubject.next("error"),this.scheduleReconnect()}}buildUrl(t){let c=`${this.config.apiBaseUrl.replace(/\/$/,"")}/events/sse`,d=new URLSearchParams;return d.set("token",t),this.lastOptions.rooms?.length&&d.set("rooms",this.lastOptions.rooms.join(",")),this.lastOptions.eventTypes?.length&&d.set("types",this.lastOptions.eventTypes.join(",")),`${c}?${d.toString()}`}handleMessage(t){try{let n=JSON.parse(t.data);this.eventsSubject.next(n)}catch{}}scheduleReconnect(){if(this.disconnect(),this.reconnectAttempts>=this.lastOptions.maxReconnectAttempts)return;this.reconnectAttempts++;let t=this.lastOptions.reconnectDelayMs;setTimeout(()=>this.establishConnection(),t)}static \u0275fac=function(n){return new(n||r)($(xt),$(st))};static \u0275prov=W({token:r,factory:r.\u0275fac,providedIn:"root"})};var Dt=(r,t)=>t.title,Et=(r,t)=>t.range,Ot=(r,t)=>t.id;function wt(r,t){if(r&1&&(i(0,"ui-alert",8),a(1),e()),r&2){let n=p();l("dismissible",!0),o(),g(" ",n.errorMessage()," ")}}function kt(r,t){r&1&&(i(0,"div",9),f(1,"ui-spinner",10),e()),r&2&&(o(),l("showLabel",!0))}function At(r,t){r&1&&a(0," Excellent ")}function It(r,t){r&1&&a(0," Needs Attention ")}function Tt(r,t){r&1&&a(0," Critical ")}function zt(r,t){if(r&1&&(i(0,"mat-icon"),a(1),e()),r&2){let n=p().$implicit,c=p(2);S("trend-icon trend-icon--"+n.metric.trend),o(),g(" ",c.getTrendIcon(n.metric.trend)," ")}}function Rt(r,t){if(r&1&&(i(0,"span",86),a(1),e()),r&2){let n=p().$implicit;o(),m(n.description)}}function Nt(r,t){if(r&1&&(i(0,"div",79)(1,"div",80)(2,"mat-icon"),a(3),e()(),i(4,"div",81)(5,"span",82),a(6),e(),i(7,"div",83)(8,"span",84),a(9),M(10,"number"),e(),u(11,zt,2,3,"mat-icon",85),e(),u(12,Rt,2,1,"span",86),e()()),r&2){let n=t.$implicit;S("kpi-card--"+n.color),o(3),m(n.icon),o(3),m(n.title),o(3),tt(" ",L(10,8,n.metric.value,"1.0-1"),"",n.metric.unit==="%"?"%":""," "),o(2),_(n.metric.trend?11:-1),o(),_(n.description?12:-1)}}function Yt(r,t){if(r&1&&(i(0,"div",45),f(1,"span",87),i(2,"span",88),a(3),e()()),r&2){let n=t.$implicit;o(),S("legend-dot--"+n.label),o(2),et("",n.range,": ",n.count," (",n.percentage.toFixed(1),"%)")}}function $t(r,t){r&1&&(i(0,"ui-alert",60)(1,"strong"),a(2,"Insight:"),e(),a(3," Many students start but don't complete quizzes. Consider reviewing quiz length or difficulty. "),e()),r&2&&l("showIcon",!0)}function jt(r,t){r&1&&(i(0,"ui-alert",61)(1,"strong"),a(2,"Great!"),e(),a(3," High completion rate indicates good student engagement. "),e()),r&2&&l("showIcon",!0)}function Ft(r,t){if(r&1&&(i(0,"ui-badge",65),a(1),e()),r&2){let n=p(2);o(),m(n.alerts().length)}}function Lt(r,t){r&1&&(i(0,"div",66)(1,"mat-icon"),a(2,"check_circle"),e(),i(3,"p"),a(4,"No active alerts. Everything looks good!"),e()())}function Bt(r,t){if(r&1&&(i(0,"div",90)(1,"mat-icon",91),a(2),e(),i(3,"div",92)(4,"h4",93),a(5),e(),i(6,"p",94),a(7),e()(),i(8,"ui-badge",35),a(9),e()()),r&2){let n=t.$implicit,c=p(3);S("alert-item--"+n.severity),o(2),m(c.getAlertIcon(n.severity)),o(3),m(n.title),o(2),m(n.message),o(),l("color",n.severity==="critical"?"danger":n.severity==="warning"?"warning":"info"),o(),g(" ",n.severity," ")}}function Ut(r,t){if(r&1&&(i(0,"div",67),C(1,Bt,10,7,"div",89,Ot),e()),r&2){let n=p(2);o(),y(n.alerts())}}function qt(r,t){r&1&&(i(0,"div",66)(1,"mat-icon"),a(2,"thumb_up"),e(),i(3,"p"),a(4,"No recommendations at this time."),e()())}function Ht(r,t){if(r&1&&(i(0,"a",101),a(1," Take Action "),i(2,"mat-icon"),a(3,"arrow_forward"),e()()),r&2){let n=p().$implicit;l("href",n.actionUrl,Z)}}function Gt(r,t){if(r&1&&(i(0,"div",95)(1,"div",96)(2,"h4",97),a(3),e(),i(4,"div",98)(5,"ui-badge",35),a(6),e(),i(7,"ui-badge",99),a(8),e()()(),i(9,"p",100),a(10),e(),u(11,Ht,4,1,"a",101),e()),r&2){let n=t.$implicit,c=p(3);o(3),m(n.title),o(2),l("color",c.getImpactColor(n.impact)),o(),g(" ",n.impact," impact "),o(2),g(" ",n.effort," effort "),o(2),m(n.description),o(),_(n.actionUrl?11:-1)}}function Kt(r,t){if(r&1&&(i(0,"div",69),C(1,Gt,12,6,"div",95,Ot),e()),r&2){let n=p(2);o(),y(n.recommendations())}}function Qt(r,t){if(r&1&&(i(0,"div",11)(1,"ui-card",12)(2,"div",13)(3,"div",14),f(4,"ui-chart",15),i(5,"div",16)(6,"span",17),a(7),e(),i(8,"span",18),a(9,"Health Score"),e()()(),i(10,"div",19)(11,"h3",20),a(12,"Institution Health"),e(),i(13,"p",21),a(14," Combined metric based on average scores, completion rates, and participation. "),e(),i(15,"div",22)(16,"ui-badge",23),u(17,At,1,0)(18,It,1,0)(19,Tt,1,0),e()()()()(),i(20,"ui-card",24)(21,"div",25)(22,"mat-icon"),a(23,"analytics"),e(),i(24,"h3"),a(25,"Quick Summary"),e()(),i(26,"div",26)(27,"div",27)(28,"span",28),a(29),e(),i(30,"span",29),a(31,"Avg Score"),e()(),i(32,"div",27)(33,"span",28),a(34),e(),i(35,"span",29),a(36,"Completion"),e()(),i(37,"div",27)(38,"span",28),a(39),e(),i(40,"span",29),a(41,"Participation"),e()()()(),i(42,"ui-card",30)(43,"div",31)(44,"mat-icon"),a(45,"wifi"),e(),i(46,"h3"),a(47,"Live Status"),e()(),i(48,"div",32)(49,"div",33)(50,"span",34),a(51,"SSE Connection"),e(),i(52,"ui-badge",35),M(53,"async"),a(54),M(55,"async"),e()(),i(56,"div",33)(57,"span",34),a(58,"Last Updated"),e(),i(59,"span",36),a(60),M(61,"date"),e()()()()(),i(62,"section",37)(63,"h2",38)(64,"mat-icon"),a(65,"insights"),e(),a(66," Key Performance Indicators "),e(),i(67,"div",39),C(68,Nt,13,11,"div",40,Dt),e()(),i(70,"div",41)(71,"ui-card",42)(72,"div",43),f(73,"ui-chart",15),e(),i(74,"div",44),C(75,Yt,4,5,"div",45,Et),e(),i(77,"div",46)(78,"div",47)(79,"span",48),a(80,"Average"),e(),i(81,"span",49),a(82),e()(),i(83,"div",47)(84,"span",48),a(85,"Median"),e(),i(86,"span",49),a(87),e()(),i(88,"div",47)(89,"span",48),a(90,"Std Dev"),e(),i(91,"span",49),a(92),e()()()(),i(93,"ui-card",50)(94,"div",51),f(95,"ui-chart",15),e(),i(96,"div",52)(97,"div",53)(98,"mat-icon"),a(99,"check_circle"),e(),i(100,"div")(101,"span",54),a(102),e(),i(103,"span",55),a(104,"Completed"),e()()(),i(105,"div",56)(106,"mat-icon"),a(107,"pending"),e(),i(108,"div")(109,"span",54),a(110),e(),i(111,"span",55),a(112,"In Progress"),e()()(),i(113,"div",57)(114,"mat-icon"),a(115,"cancel"),e(),i(116,"div")(117,"span",54),a(118),e(),i(119,"span",55),a(120,"Missed"),e()()()()(),i(121,"ui-card",58)(122,"div",43),f(123,"ui-chart",15),e(),i(124,"div",59),u(125,$t,4,1,"ui-alert",60)(126,jt,4,1,"ui-alert",61),e()()(),i(127,"div",62)(128,"ui-card",63)(129,"div",64)(130,"mat-icon"),a(131,"notifications_active"),e(),i(132,"h3"),a(133,"Active Alerts"),e(),u(134,Ft,2,1,"ui-badge",65),e(),u(135,Lt,5,0,"div",66)(136,Ut,3,0,"div",67),e(),i(137,"ui-card",68)(138,"div",64)(139,"mat-icon"),a(140,"lightbulb"),e(),i(141,"h3"),a(142,"Recommendations"),e()(),u(143,qt,5,0,"div",66)(144,Kt,3,0,"div",69),e()(),i(145,"section",37)(146,"h2",38)(147,"mat-icon"),a(148,"dashboard"),e(),a(149," Institution Overview "),e(),i(150,"div",70),f(151,"ui-stat-card",71)(152,"ui-stat-card",72)(153,"ui-stat-card",73)(154,"ui-stat-card",74)(155,"ui-stat-card",75)(156,"ui-stat-card",76)(157,"ui-stat-card",77)(158,"ui-stat-card",78),e()()),r&2){let n,c,d,h,P,D,E,w,k,A,I,T,z,s=p();o(4),l("type","doughnut")("data",s.healthGaugeData)("options",s.gaugeOptions),o(3),m(s.healthScore()),o(9),l("color",s.healthScoreColor()),o(),_(s.healthScore()>=80?17:s.healthScore()>=60?18:19),o(12),g("",((n=s.stats())==null||n.scores==null||n.scores.averagePercent==null?null:n.scores.averagePercent.toFixed(1))??0,"%"),o(5),g("",s.participation().completionRate.toFixed(1),"%"),o(5),g("",s.participation().participationRate.toFixed(1),"%"),o(13),l("color",F(53,39,s.connectionState$)==="connected"?"success":"warning"),o(2),g(" ",F(55,41,s.connectionState$)||"disconnected"," "),o(6),m(L(61,43,(c=s.stats())==null?null:c.generatedAt,"short")),o(8),y(s.kpis()),o(5),l("type","bar")("data",s.scoreDistributionChartData)("options",s.barOptions),o(2),y(s.scoreDistribution().buckets),o(7),g("",s.scoreDistribution().averageScore.toFixed(1),"%"),o(5),g("",s.scoreDistribution().medianScore.toFixed(1),"%"),o(5),m(s.scoreDistribution().standardDeviation.toFixed(1)),o(3),l("type","doughnut")("data",s.participationChartData)("options",s.doughnutOptions),o(7),m(((d=s.stats())==null||d.participation==null?null:d.participation.completed)??0),o(8),m(((h=s.stats())==null||h.participation==null?null:h.participation.inProgress)??0),o(8),m(((P=s.stats())==null||P.participation==null?null:P.participation.missed)??0),o(5),l("type","bar")("data",s.participationRateChartData)("options",s.verticalBarOptions),o(2),_(s.participation().participationRate-s.participation().completionRate>20?125:s.participation().completionRate>=80?126:-1),o(9),_(s.alerts().length>0?134:-1),o(),_(s.alerts().length===0?135:136),o(8),_(s.recommendations().length===0?143:144),o(8),l("value",((D=s.stats())==null||D.totals==null?null:D.totals.academicYears)??0),o(),l("value",((E=s.stats())==null||E.totals==null?null:E.totals.classes)??0),o(),l("value",((w=s.stats())==null||w.totals==null?null:w.totals.students)??0),o(),l("value",((k=s.stats())==null||k.totals==null?null:k.totals.teachers)??0),o(),l("value",((A=s.stats())==null||A.totals==null?null:A.totals.teachingUnits)??0),o(),l("value",((I=s.stats())==null||I.totals==null?null:I.totals.quizzes)??0),o(),l("value",((T=s.stats())==null||T.totals==null?null:T.totals.questions)??0),o(),l("value",((z=s.stats())==null||z.scores==null?null:z.scores.completedAttemptsWithScore)??0)}}var Mt=class r{api=x(Ct);statisticsService=x(yt);sse=x(O);destroyRef=x(V);cdr=x(nt);isLoading=b(!1);errorMessage=b("");publishLoading=b(!1);academicYears=b([]);selectedAcademicYearId=b(null);stats=b(null);kpis=v(()=>{let t=this.stats();return t?this.statisticsService.buildDeanKpis(t):[]});alerts=v(()=>{let t=this.stats();return t?this.statisticsService.generateAlerts(t):[]});recommendations=v(()=>{let t=this.stats();return t?this.statisticsService.generateRecommendations(t):[]});scoreDistribution=v(()=>{let t=this.stats();return t?this.statisticsService.buildScoreDistributionFromStats(t):this.getEmptyScoreDistribution()});participation=v(()=>{let t=this.stats();return t?this.statisticsService.buildParticipationAnalytics(t):this.getEmptyParticipation()});academicYearOptions=v(()=>{let t=[{value:null,label:"All years"}],n=this.academicYears().map(c=>({value:c.id,label:this.formatAcademicYearLabel(c)}));return[...t,...n]});connectionState$=this.sse.connectionState$;healthScore=v(()=>{let t=this.stats();if(!t)return 0;let n=t.participation.invited+t.participation.inProgress+t.participation.completed+t.participation.missed,c=n>0?t.participation.completed/n*100:0,d=t.scores.averagePercent??0,h=n>0?t.participation.missed/n*100:0;return Math.round(d*.4+c*.4+(100-h)*.2)});healthScoreColor=v(()=>{let t=this.healthScore();return t>=80?"success":t>=60?"warning":"danger"});constructor(){this.loadInitial(),this.sse.on("dean:stats-updated").pipe(B(this.destroyRef)).subscribe(t=>{this.stats.set(t.data)})}async loadInitial(){this.isLoading.set(!0),this.errorMessage.set("");try{let t=await Y(this.api.listAcademicYears());this.academicYears.set(t),await this.refreshStats(),this.connectSse()}catch(t){this.errorMessage.set(t instanceof Error?t.message:"Failed to load dashboard.")}finally{this.isLoading.set(!1),this.cdr.markForCheck()}}async onAcademicYearChange(t){this.selectedAcademicYearId.set(t),await this.refreshStats(),this.connectSse()}async refreshStats(){this.errorMessage.set("");try{let t=await Y(this.api.getStats(this.selectedAcademicYearId()??void 0));this.stats.set(t),this.statisticsService.clearCache()}catch(t){this.errorMessage.set(t instanceof Error?t.message:"Failed to load stats.")}}connectSse(){let t=["role:DEAN"],n=this.selectedAcademicYearId();n&&t.push(`academic-year:${n}`),this.sse.connect({rooms:t,eventTypes:["dean:stats-updated"]})}onPublish(){this.errorMessage.set(""),this.publishLoading.set(!0),this.api.publishStats(this.selectedAcademicYearId()??void 0).pipe(B(this.destroyRef)).subscribe({next:()=>{},error:t=>{this.errorMessage.set(t instanceof Error?t.message:"Failed to publish stats.")},complete:()=>{this.publishLoading.set(!1)}})}dismissAlert(t){console.log("Dismissed alert:",t)}formatAcademicYearLabel(t){let n=this.safeYear(t.start),c=this.safeYear(t.end);return n&&c?`${n}\u2013${c}`:`${t.start} \u2192 ${t.end}`}safeYear(t){let n=new Date(t);return Number.isNaN(n.getTime())?null:String(n.getFullYear())}getEmptyScoreDistribution(){return{buckets:[{range:"90-100",label:"excellent",count:0,percentage:0},{range:"80-89",label:"good",count:0,percentage:0},{range:"70-79",label:"average",count:0,percentage:0},{range:"60-69",label:"below",count:0,percentage:0},{range:"0-59",label:"failing",count:0,percentage:0}],totalAssessed:0,averageScore:0,medianScore:0,standardDeviation:0,highestScore:0,lowestScore:0}}getEmptyParticipation(){return{totalInvitations:0,totalParticipants:0,participationRate:0,completionRate:0,byStatus:[],averageTimeToStart:0,averageCompletionTime:0}}get scoreDistributionChartData(){let t=this.scoreDistribution();return{labels:t.buckets.map(n=>n.range),datasets:[{label:"Students",data:t.buckets.map(n=>n.count),backgroundColor:["#10b981","#22c55e","#eab308","#f97316","#ef4444"],borderRadius:6}]}}get participationChartData(){let t=this.stats()?.participation;return{labels:["Invited","In Progress","Completed","Missed"],datasets:[{data:[t?.invited??0,t?.inProgress??0,t?.completed??0,t?.missed??0],backgroundColor:["#64748b","#3b82f6","#10b981","#ef4444"],borderWidth:0}]}}get participationRateChartData(){let t=this.participation();return{labels:["Participation","Completion"],datasets:[{label:"Rate %",data:[t.participationRate,t.completionRate],backgroundColor:["#3572ef","#10b981"],borderRadius:6}]}}get healthGaugeData(){let t=this.healthScore();return{labels:["Health Score","Remaining"],datasets:[{data:[t,100-t],backgroundColor:[t>=80?"#10b981":t>=60?"#eab308":"#ef4444","#e2e8f0"],borderWidth:0,circumference:180,rotation:270}]}}get doughnutOptions(){return{cutout:"70%",plugins:{legend:{position:"bottom"},tooltip:{enabled:!0}}}}get gaugeOptions(){return{cutout:"80%",plugins:{legend:{display:!1},tooltip:{enabled:!1}}}}get barOptions(){return{indexAxis:"y",scales:{x:{beginAtZero:!0,ticks:{precision:0}}},plugins:{legend:{display:!1}}}}get verticalBarOptions(){return{scales:{y:{beginAtZero:!0,max:100}},plugins:{legend:{display:!1}}}}getTrendIcon(t){switch(t){case"up":return"trending_up";case"down":return"trending_down";default:return"trending_flat"}}getTrendColor(t){switch(t){case"up":return"success";case"down":return"danger";default:return"neutral"}}getAlertIcon(t){switch(t){case"critical":return"error";case"warning":return"warning";default:return"info"}}getImpactColor(t){switch(t){case"high":return"success";case"medium":return"warning";default:return"info"}}static \u0275fac=function(n){return new(n||r)};static \u0275cmp=J({type:r,selectors:[["app-dean-dashboard"]],decls:16,vars:6,consts:[[1,"dashboard"],[1,"dashboard__header"],[1,"dashboard__title-section"],[1,"dashboard__title"],[1,"dashboard__subtitle"],[1,"dashboard__actions"],["label","Academic Year","placeholder","All years",3,"valueChange","options","ngModel","searchable"],["variant","outline","color","primary",3,"clicked","loading"],["variant","soft","color","danger",3,"dismissible"],[1,"dashboard__loading"],["size","lg","color","primary","label","Loading dashboard insights...",3,"showLabel"],[1,"dashboard__overview"],["variant","elevated",1,"health-card"],[1,"health-card__content"],[1,"health-card__gauge"],[3,"type","data","options"],[1,"health-card__score"],[1,"health-card__value"],[1,"health-card__label"],[1,"health-card__details"],[1,"health-card__title"],[1,"health-card__description"],[1,"health-card__status"],["variant","solid",3,"color"],["variant","outlined",1,"summary-card"],[1,"summary-card__header"],[1,"summary-card__stats"],[1,"summary-stat"],[1,"summary-stat__value"],[1,"summary-stat__label"],["variant","outlined",1,"status-card"],[1,"status-card__header"],[1,"status-card__content"],[1,"status-row"],[1,"status-row__label"],["variant","subtle",3,"color"],[1,"status-row__value"],[1,"dashboard__section"],[1,"section__title"],[1,"kpi-grid"],[1,"kpi-card",3,"class"],[1,"dashboard__charts"],["variant","outlined","title","Score Distribution","subtitle","Student performance breakdown"],[1,"chart-container"],[1,"chart-legend"],[1,"legend-item"],[1,"chart-stats"],[1,"chart-stat"],[1,"chart-stat__label"],[1,"chart-stat__value"],["variant","outlined","title","Participation Overview","subtitle","Quiz engagement metrics"],[1,"chart-container","chart-container--doughnut"],[1,"participation-stats"],[1,"participation-stat","participation-stat--success"],[1,"participation-stat__value"],[1,"participation-stat__label"],[1,"participation-stat","participation-stat--info"],[1,"participation-stat","participation-stat--danger"],["variant","outlined","title","Rate Comparison","subtitle","Participation vs Completion"],[1,"rate-insights"],["variant","soft","color","warning",3,"showIcon"],["variant","soft","color","success",3,"showIcon"],[1,"dashboard__insights"],["variant","outlined",1,"alerts-card"],[1,"card-header"],["color","danger","variant","solid"],[1,"empty-state"],[1,"alerts-list"],["variant","outlined",1,"recommendations-card"],[1,"recommendations-list"],[1,"totals-grid"],["label","Academic Years","color","neutral","icon","calendar_today","format","number",3,"value"],["label","Classes","color","primary","icon","class","format","number",3,"value"],["label","Students","color","info","icon","school","format","number",3,"value"],["label","Teachers","color","secondary","icon","person","format","number",3,"value"],["label","Teaching Units","color","accent","icon","menu_book","format","number",3,"value"],["label","Quizzes","color","success","icon","assignment","format","number",3,"value"],["label","Questions","color","warning","icon","quiz","format","number",3,"value"],["label","Assessments Completed","color","primary","icon","task_alt","format","number",3,"value"],[1,"kpi-card"],[1,"kpi-card__icon"],[1,"kpi-card__content"],[1,"kpi-card__label"],[1,"kpi-card__value-row"],[1,"kpi-card__value"],[3,"class"],[1,"kpi-card__description"],[1,"legend-dot"],[1,"legend-label"],[1,"alert-item",3,"class"],[1,"alert-item"],[1,"alert-item__icon"],[1,"alert-item__content"],[1,"alert-item__title"],[1,"alert-item__message"],[1,"recommendation-item"],[1,"recommendation-item__header"],[1,"recommendation-item__title"],[1,"recommendation-item__badges"],["color","neutral","variant","outline"],[1,"recommendation-item__description"],[1,"recommendation-item__action",3,"href"]],template:function(n,c){n&1&&(i(0,"div",0)(1,"header",1)(2,"div",2)(3,"h1",3),a(4,"Dean Dashboard"),e(),i(5,"p",4),a(6,"Institution-wide performance overview and insights"),e()(),i(7,"div",5)(8,"ui-select",6),j("valueChange",function(h){return c.onAcademicYearChange(h)}),e(),i(9,"ui-button",7),j("clicked",function(){return c.onPublish()}),i(10,"mat-icon"),a(11,"refresh"),e(),a(12," Refresh Data "),e()()(),u(13,wt,2,2,"ui-alert",8),u(14,kt,2,1,"div",9)(15,Qt,159,46),e()),n&2&&(o(8),l("options",c.academicYearOptions())("ngModel",c.selectedAcademicYearId())("searchable",!0),o(),l("loading",c.publishLoading()),o(4),_(c.errorMessage()?13:-1),o(),_(c.isLoading()&&!c.stats()?14:15))},dependencies:[ot,dt,ct,lt,pt,mt,ht,vt,_t,gt,bt,ft,ut,St,it,rt,at],styles:[".dashboard[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem;padding:.5rem}.dashboard__header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;gap:1rem;flex-wrap:wrap}.dashboard__title-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.dashboard__title[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;color:var(--text-primary);margin:0}.dashboard__subtitle[_ngcontent-%COMP%]{font-size:.875rem;color:var(--text-tertiary);margin:0}.dashboard__actions[_ngcontent-%COMP%]{display:flex;gap:.75rem;align-items:flex-end;flex-wrap:wrap}.dashboard__actions[_ngcontent-%COMP%]   ui-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:.5rem}.dashboard__loading[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:4rem 0}.dashboard__overview[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;gap:1rem}@media (max-width: 1200px){.dashboard__overview[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr}}@media (max-width: 768px){.dashboard__overview[_ngcontent-%COMP%]{grid-template-columns:1fr}}.health-card[_ngcontent-%COMP%]{grid-column:span 1}.health-card__content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5rem}@media (max-width: 480px){.health-card__content[_ngcontent-%COMP%]{flex-direction:column}}.health-card__gauge[_ngcontent-%COMP%]{position:relative;width:140px;height:90px;flex-shrink:0}.health-card__score[_ngcontent-%COMP%]{position:absolute;bottom:0;left:50%;transform:translate(-50%);text-align:center}.health-card__value[_ngcontent-%COMP%]{display:block;font-size:2rem;font-weight:700;color:var(--text-primary);line-height:1}.health-card__label[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-tertiary);text-transform:uppercase;letter-spacing:.05em}.health-card__details[_ngcontent-%COMP%]{flex:1}.health-card__title[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:var(--text-primary);margin:0 0 .25rem}.health-card__description[_ngcontent-%COMP%]{font-size:.8125rem;color:var(--text-tertiary);margin:0 0 .75rem}.health-card__status[_ngcontent-%COMP%]{display:inline-block}.summary-card__header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-bottom:1rem}.summary-card__header[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--color-primary)}.summary-card__header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;margin:0;color:var(--text-primary)}.summary-card__stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:1rem;text-align:center}.summary-stat[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem;padding:.75rem;background:var(--surface-sunken);border-radius:8px}.summary-stat__value[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:var(--color-primary)}.summary-stat__label[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-tertiary);text-transform:uppercase;letter-spacing:.05em}.status-card__header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-bottom:1rem}.status-card__header[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--color-success)}.status-card__header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;margin:0;color:var(--text-primary)}.status-card__content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.status-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.5rem 0;border-bottom:1px solid var(--border-subtle)}.status-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.status-row__label[_ngcontent-%COMP%]{font-size:.875rem;color:var(--text-secondary)}.status-row__value[_ngcontent-%COMP%]{font-size:.875rem;color:var(--text-primary);font-weight:500}.dashboard__section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.section__title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:1.125rem;font-weight:600;color:var(--text-primary);margin:0}.section__title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--color-primary)}.kpi-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:1rem}.kpi-card[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:1rem;padding:1.25rem;background:var(--surface-raised);border:1px solid var(--border-default);border-radius:12px;transition:all var(--motion-duration-fast) var(--motion-ease-out)}.kpi-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--elevation-2)}.kpi-card__icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:48px;height:48px;border-radius:12px;flex-shrink:0}.kpi-card__icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:24px;width:24px;height:24px}.kpi-card__content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:.25rem}.kpi-card__label[_ngcontent-%COMP%]{font-size:.8125rem;color:var(--text-tertiary);text-transform:uppercase;letter-spacing:.05em}.kpi-card__value-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.kpi-card__value[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:var(--text-primary)}.kpi-card__description[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-quaternary)}.kpi-card--primary[_ngcontent-%COMP%]   .kpi-card__icon[_ngcontent-%COMP%]{background:var(--surface-brand);color:var(--color-primary)}.kpi-card--success[_ngcontent-%COMP%]   .kpi-card__icon[_ngcontent-%COMP%]{background:var(--surface-success);color:var(--color-success)}.kpi-card--warning[_ngcontent-%COMP%]   .kpi-card__icon[_ngcontent-%COMP%]{background:var(--surface-warning);color:var(--color-warning)}.kpi-card--danger[_ngcontent-%COMP%]   .kpi-card__icon[_ngcontent-%COMP%]{background:var(--surface-danger);color:var(--color-danger)}.kpi-card--info[_ngcontent-%COMP%]   .kpi-card__icon[_ngcontent-%COMP%]{background:var(--surface-info);color:var(--color-info)}.trend-icon[_ngcontent-%COMP%]{font-size:18px!important;width:18px!important;height:18px!important}.trend-icon--up[_ngcontent-%COMP%]{color:var(--color-success)}.trend-icon--down[_ngcontent-%COMP%]{color:var(--color-danger)}.trend-icon--stable[_ngcontent-%COMP%]{color:var(--text-tertiary)}.dashboard__charts[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:1rem}@media (max-width: 1200px){.dashboard__charts[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (max-width: 768px){.dashboard__charts[_ngcontent-%COMP%]{grid-template-columns:1fr}}.chart-container[_ngcontent-%COMP%]{height:300px;margin-bottom:1rem}.chart-container--doughnut[_ngcontent-%COMP%]{height:180px;display:flex;justify-content:center}.chart-legend[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.75rem;margin-bottom:1rem}.legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.375rem;font-size:.75rem;color:var(--text-secondary)}.legend-dot[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:50%}.legend-dot--excellent[_ngcontent-%COMP%]{background:#10b981}.legend-dot--good[_ngcontent-%COMP%]{background:#22c55e}.legend-dot--average[_ngcontent-%COMP%]{background:#eab308}.legend-dot--below[_ngcontent-%COMP%]{background:#f97316}.legend-dot--failing[_ngcontent-%COMP%]{background:#ef4444}.chart-stats[_ngcontent-%COMP%]{display:flex;justify-content:space-around;padding-top:.75rem;border-top:1px solid var(--border-subtle)}.chart-stat[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:.125rem}.chart-stat__label[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-tertiary)}.chart-stat__value[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:var(--text-primary)}.participation-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:.75rem}.participation-stat[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem;border-radius:8px}.participation-stat[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.participation-stat__value[_ngcontent-%COMP%]{display:block;font-size:1.25rem;font-weight:700;line-height:1}.participation-stat__label[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-tertiary)}.participation-stat--success[_ngcontent-%COMP%]{background:var(--surface-success)}.participation-stat--success[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .participation-stat--success[_ngcontent-%COMP%]   .participation-stat__value[_ngcontent-%COMP%]{color:var(--color-success)}.participation-stat--info[_ngcontent-%COMP%]{background:var(--surface-info)}.participation-stat--info[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .participation-stat--info[_ngcontent-%COMP%]   .participation-stat__value[_ngcontent-%COMP%]{color:var(--color-info)}.participation-stat--danger[_ngcontent-%COMP%]{background:var(--surface-danger)}.participation-stat--danger[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .participation-stat--danger[_ngcontent-%COMP%]   .participation-stat__value[_ngcontent-%COMP%]{color:var(--color-danger)}.rate-insights[_ngcontent-%COMP%]{margin-top:.75rem}.dashboard__insights[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem}@media (max-width: 992px){.dashboard__insights[_ngcontent-%COMP%]{grid-template-columns:1fr}}.card-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-bottom:1rem}.card-header[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--color-primary)}.card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{flex:1;font-size:1rem;font-weight:600;margin:0;color:var(--text-primary)}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:.5rem;padding:2rem;text-align:center;color:var(--text-tertiary)}.empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;opacity:.5}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.875rem}.alerts-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.alert-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:.75rem;padding:1rem;border-radius:8px;border-left:4px solid}.alert-item--critical[_ngcontent-%COMP%]{background:var(--surface-danger);border-left-color:var(--color-danger)}.alert-item--warning[_ngcontent-%COMP%]{background:var(--surface-warning);border-left-color:var(--color-warning)}.alert-item--info[_ngcontent-%COMP%]{background:var(--surface-info);border-left-color:var(--color-info)}.alert-item__icon[_ngcontent-%COMP%]{flex-shrink:0;font-size:20px;width:20px;height:20px}.alert-item--critical[_ngcontent-%COMP%]   .alert-item__icon[_ngcontent-%COMP%]{color:var(--color-danger)}.alert-item--warning[_ngcontent-%COMP%]   .alert-item__icon[_ngcontent-%COMP%]{color:var(--color-warning)}.alert-item--info[_ngcontent-%COMP%]   .alert-item__icon[_ngcontent-%COMP%]{color:var(--color-info)}.alert-item__content[_ngcontent-%COMP%]{flex:1}.alert-item__title[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:var(--text-primary);margin:0 0 .25rem}.alert-item__message[_ngcontent-%COMP%]{font-size:.8125rem;color:var(--text-secondary);margin:0;line-height:1.4}.recommendations-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.recommendation-item[_ngcontent-%COMP%]{padding:1rem;background:var(--surface-sunken);border-radius:8px;transition:background var(--motion-duration-fast)}.recommendation-item[_ngcontent-%COMP%]:hover{background:var(--surface-hover)}.recommendation-item__header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;gap:.75rem;margin-bottom:.5rem;flex-wrap:wrap}.recommendation-item__title[_ngcontent-%COMP%]{font-size:.9375rem;font-weight:600;color:var(--text-primary);margin:0}.recommendation-item__badges[_ngcontent-%COMP%]{display:flex;gap:.375rem}.recommendation-item__description[_ngcontent-%COMP%]{font-size:.8125rem;color:var(--text-secondary);margin:0 0 .75rem;line-height:1.5}.recommendation-item__action[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.25rem;font-size:.8125rem;font-weight:500;color:var(--color-primary);text-decoration:none;transition:color var(--motion-duration-fast)}.recommendation-item__action[_ngcontent-%COMP%]:hover{color:var(--color-primary-600)}.recommendation-item__action[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.totals-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem}"]})};export{Mt as DeanDashboard};
