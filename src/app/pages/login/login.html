<section class="login-page">
  <!-- Blurred Background -->
  <div class="login-page__background"></div>

  <!-- Main Container -->
  <div class="login-page__container">
    <!-- Left Card - Image/Branding -->
    <div class="login-page__image-card">
      <!-- Quizzy Logo (top-left) -->
      <div class="login-page__quizzy-brand">
        <div class="login-page__logo-circle">
          <span class="login-page__logo-text">Q</span>
        </div>
        <img src="assets/images/logos/iusj-logo.png" alt="IUSJ logo" class="login-page__school-logo" />
        <span class="login-page__brand-text">QUIZZY</span>
      </div>

      <!-- Cycling Images -->
      <div class="login-page__image-slider">
        <div class="login-page__slide active" data-slide="0">
          <img src="https://images.unsplash.com/photo-1606107557195-0e29a4b5b4aa?w=800&h=600&fit=crop" alt="Students taking quiz" />
        </div>
        <div class="login-page__slide" data-slide="1">
          <img src="https://images.unsplash.com/photo-1434030216411-0b793f4b4173?w=800&h=600&fit=crop" alt="Classroom examination" />
        </div>
        <div class="login-page__slide" data-slide="2">
          <img src="https://images.unsplash.com/photo-1509062522246-3755977927d7?w=800&h=600&fit=crop" alt="Students studying together" />
        </div>
        <div class="login-page__slide" data-slide="3">
          <img src="https://images.unsplash.com/photo-1522202176988-66273c2fd55f?w=800&h=600&fit=crop" alt="Group quiz session" />
        </div>
        <div class="login-page__slide" data-slide="4">
          <img src="https://images.unsplash.com/photo-1581726690015-c9861fa5057f?w=800&h=600&fit=crop" alt="Digital learning platform" />
        </div>
      </div>

      <!-- Dynamic Overlay Content -->
      <div class="login-page__overlay-content">
        <!-- Dynamic Hero Text -->
        <div class="login-page__text-slider">
          <div class="login-page__text-slide active" data-text="0">
            <h2 class="login-page__hero-title">Smart Quiz Management</h2>
          </div>
          <div class="login-page__text-slide" data-text="1">
            <h2 class="login-page__hero-title">Seamless Digital Examinations</h2>
          </div>
          <div class="login-page__text-slide" data-text="2">
            <h2 class="login-page__hero-title">Collaborative Learning Excellence</h2>
          </div>
          <div class="login-page__text-slide" data-text="3">
            <h2 class="login-page__hero-title">Interactive Knowledge Hub</h2>
          </div>
          <div class="login-page__text-slide" data-text="4">
            <h2 class="login-page__hero-title">Advanced Analytics & Insights</h2>
          </div>
        </div>
      </div>
    </div>

    <!-- Right Card - Login Form -->
    <div class="login-page__form-card">
      <!-- Theme Toggle -->
      <div class="login-page__theme-toggle">
        <ui-theme-toggle />
      </div>

      <!-- Form Header -->
      <div class="login-page__form-header">
        <h2 class="login-page__form-title">Welcome Back to Quizzy</h2>
        <p class="login-page__form-subtitle">Login to access your Quizzy dashboard</p>
      </div>

      <!-- Login Form -->
      <form class="login-page__form" (ngSubmit)="onSubmit()" #loginForm="ngForm">
        <!-- Error Alert -->
        <ui-alert
          *ngIf="errorMessage"
          variant="soft"
          color="danger"
          [title]="'Authentication Failed'"
          [dismissible]="true"
          (dismissed)="errorMessage = ''"
        >
          {{ errorMessage }}
        </ui-alert>

        <!-- Role Selection -->
        <div class="login-page__field">
          <label class="login-page__label">Select Role</label>
          <ui-select
            placeholder="Teacher"
            [options]="roleOptions"
            [(ngModel)]="loginRequest.role"
            name="role"
            [required]="true"
            [validationState]="roleError ? 'invalid' : 'default'"
            [errorMessage]="roleError"
            [iconLeft]="true"
          >
            <mat-icon slot="icon-left">person_outline</mat-icon>
          </ui-select>
        </div>

        <!-- Identifier (email or matricule) -->
        <div class="login-page__field">
          <label class="login-page__label">{{ identifierLabel }}</label>
          <ui-input
            [placeholder]="identifierPlaceholder"
            [type]="loginRequest.role === 'STUDENT' ? 'text' : 'email'"
            [(ngModel)]="loginRequest.identifier"
            name="identifier"
            [required]="true"
            [validationState]="identifierError ? 'invalid' : 'default'"
            [errorMessage]="identifierError"
            autocomplete="username"
            [iconLeft]="true"
          >
            <mat-icon slot="icon-left">email</mat-icon>
          </ui-input>
        </div>

        <!-- Password -->
        <div class="login-page__field">
          <label class="login-page__label">Password</label>
          <ui-input
            placeholder="Enter your password"
            type="password"
            [(ngModel)]="loginRequest.password"
            name="password"
            [required]="true"
            [showPasswordToggle]="true"
            [validationState]="passwordError ? 'invalid' : 'default'"
            [errorMessage]="passwordError"
            autocomplete="current-password"
            [iconLeft]="true"
          >
            <mat-icon slot="icon-left">lock_outline</mat-icon>
          </ui-input>
        </div>

        <!-- Forgot Password Link -->
        <div class="login-page__forgot-password">
          <a href="mailto:support@quizzy.edu" class="login-page__forgot-link">Forgot Password?</a>
        </div>

        <!-- Submit Button -->
        <div class="login-page__submit">
          <ui-button
            type="submit"
            variant="solid"
            color="primary"
            size="lg"
            [fullWidth]="true"
            [loading]="isLoading"
            [disabled]="isLoading"
          >
            {{ isLoading ? 'Signing in...' : 'Login' }}
          </ui-button>
        </div>

        <!-- Sign Up Link -->
        <div class="login-page__signup">
          <p class="login-page__signup-text">
            Don't have an account? <a href="#" class="login-page__signup-link">Contact Administrator</a>
          </p>
        </div>
      </form>
    </div>
  </div>
</section>
