import{a as l}from"./chunk-Y5LGC6BU.js";import{b as r,k as h}from"./chunk-SPLO5XSZ.js";import{F as u,Q as n,U as f,Y as a,a as m,b as c,q as s}from"./chunk-XVADYIPR.js";var d=class i{constructor(e,t){this.api=e;this.store=t}login(e){let t={identifier:r(e.identifier),password:r(e.password),role:r(e.role)};return e.rememberMe!==void 0&&(t.rememberMe=!!e.rememberMe),this.api.post("/auth/login",t).pipe(s(o=>({user:o.user,tokens:o.tokens,createdAt:new Date().toISOString()})),n(o=>this.store.setSession(o)))}refreshTokens(e){let t={refreshToken:r(e)};return this.api.post("/auth/refresh",t).pipe(n(o=>{let p=this.store.getSession();p&&this.store.setSession(c(m({},p),{tokens:o}))}))}logout(){return this.api.post("/auth/logout",{}).pipe(s(()=>{}),u(()=>this.store.clear()))}static \u0275fac=function(t){return new(t||i)(a(h),a(l))};static \u0275prov=f({token:i,factory:i.\u0275fac,providedIn:"root"})};export{d as a};
