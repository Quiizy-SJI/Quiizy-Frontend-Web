import{a as de}from"./chunk-3PMPZBOS.js";import{a as X}from"./chunk-MSJ3XUEL.js";import"./chunk-MD74L3HJ.js";import"./chunk-FWCO3CJY.js";import{a as le}from"./chunk-MAWX5T35.js";import{b as Y,c as Z,f as ee,h as te,i as ne,j as ie,k as oe,n as re,u as ce}from"./chunk-XGVRFAFZ.js";import{a as ae,b as se}from"./chunk-4BWE2P25.js";import"./chunk-LUIYB3PI.js";import{d as K}from"./chunk-LM6INHLT.js";import{$a as u,Ab as T,Cb as z,Db as Q,Eb as M,Fb as k,Ka as L,Kb as j,Oa as f,Pb as V,Xb as W,Z as E,a as b,ab as n,b as O,ba as m,bb as o,ca as p,gb as D,gc as H,hb as F,hc as R,ic as $,jb as h,jc as q,kc as G,lb as g,nb as d,p as y,rc as J,ub as A,vb as N,wb as U,xb as I,yb as s,za as l,zb as x}from"./chunk-3XB4H34J.js";var me=(a,t,e)=>({page:a,pageSize:t,total:e});function pe(a,t){if(a&1){let e=h();n(0,"div",19),g("click",function(){let i=m(e).$implicit,c=d();return p(c.selectFolder(i))}),n(1,"span",20),s(2),o(),n(3,"span",21),s(4),o()()}if(a&2){let e=t.$implicit;U("active",e.isActive),l(2),x(e.name),l(2),T("(",e.count,")")}}function ge(a,t){if(a&1&&(n(0,"div")(1,"div",25)(2,"h4"),s(3),o(),n(4,"div",26)(5,"span",27),s(6),o()()()()),a&2){let e=d().$implicit,r=d();l(3),x(e.text),l(3),x(r.getQuestionTypeText(e))}}function _e(a,t){if(a&1&&(n(0,"div")(1,"span",28),s(2),o()()),a&2){let e=d().$implicit,r=d();l(),I(r.getSubjectClass(e.subject)),l(),x(e.subject)}}function fe(a,t){if(a&1&&(n(0,"div")(1,"span",29),s(2),o()()),a&2){let e=d().$implicit;l(),I(e.difficulty.toLowerCase()),l(),x(e.difficulty)}}function he(a,t){if(a&1&&(n(0,"div"),s(1),o()),a&2){let e=d().$implicit;l(),T("",e.usedCount," exams")}}function xe(a,t){if(a&1&&(n(0,"div"),s(1),o()),a&2){let e=d().$implicit;l(),x(e.lastEdit)}}function ve(a,t){if(a&1){let e=h();n(0,"button",32),g("click",function(){m(e);let i=d(2).$implicit,c=d();return p(c.editQuestion(i))}),n(1,"mat-icon"),s(2,"edit"),o(),n(3,"span"),s(4,"Edit"),o()()}}function we(a,t){if(a&1){let e=h();n(0,"button",33),g("click",function(){m(e);let i=d(2).$implicit,c=d();return p(c.viewQuestion(i))}),n(1,"mat-icon"),s(2,"visibility"),o(),n(3,"span"),s(4,"View"),o()()}}function Ce(a,t){if(a&1&&(n(0,"div"),f(1,ve,5,0,"button",30)(2,we,5,0,"button",31),o()),a&2){let e=d().$implicit;l(),u("ngIf",e.type!=="Essay"&&e.canEdit),l(),u("ngIf",e.type==="Essay"||!e.canEdit)}}function be(a,t){if(a&1&&(n(0,"div"),s(1),o()),a&2){let e=d(),r=e.$implicit,i=e.column;l(),x(r[i.key])}}function ye(a,t){if(a&1&&(D(0,22),f(1,ge,7,2,"div",23)(2,_e,3,3,"div",23)(3,fe,3,3,"div",23)(4,he,2,1,"div",23)(5,xe,2,1,"div",23)(6,Ce,3,2,"div",23)(7,be,2,1,"div",24),F()),a&2){let e=t.column;u("ngSwitch",e.key),l(),u("ngSwitchCase","text"),l(),u("ngSwitchCase","subject"),l(),u("ngSwitchCase","difficulty"),l(),u("ngSwitchCase","used"),l(),u("ngSwitchCase","lastEdit"),l(),u("ngSwitchCase","actions")}}function Qe(a,t){a&1&&(n(0,"h3"),s(1,"Create New MCQ Question"),o())}function Me(a,t){a&1&&(n(0,"h3"),s(1,"Edit MCQ Question"),o())}function ke(a,t){if(a&1&&(n(0,"option",58),s(1),o()),a&2){let e=t.$implicit;u("value",e.id),l(),x(e.name)}}function Ee(a,t){if(a&1){let e=h();n(0,"input",64),g("change",function(i){m(e);let c=d().index,_=d(2);return p(_.toggleCorrectOption(c,i))}),o()}if(a&2){let e=d().index,r=d(2);u("checked",r.isOptionCorrect(e))}}function Te(a,t){if(a&1){let e=h();n(0,"input",65),g("change",function(){m(e);let i=d().index,c=d(2);return p(c.setCorrectOption(i))}),o()}if(a&2){let e=d().index,r=d(2);u("name","correct-answer")("checked",r.isOptionCorrect(e))}}function Pe(a,t){if(a&1){let e=h();n(0,"button",66),g("click",function(){m(e);let i=d().index,c=d(2);return p(c.removeOption(i))}),n(1,"mat-icon"),s(2,"close"),o()()}}function Se(a,t){if(a&1){let e=h();n(0,"div",59),f(1,Ee,1,1,"input",60)(2,Te,1,2,"input",61),n(3,"input",62),k("ngModelChange",function(i){let c=m(e).$implicit;return M(c.text,i)||(c.text=i),p(i)}),o(),f(4,Pe,3,0,"button",63),o()}if(a&2){let e=t.$implicit,r=t.index,i=d(2);l(),u("ngIf",i.newQuestion.answerType==="multiple"),l(),u("ngIf",i.newQuestion.answerType==="single"),l(),Q("ngModel",e.text),u("placeholder","Option "+(r+1)),l(),u("ngIf",i.newQuestion.options.length>2)}}function Oe(a,t){if(a&1){let e=h();n(0,"button",67),g("click",function(){m(e);let i=d(2);return p(i.addOption())}),n(1,"mat-icon"),s(2,"add"),o(),s(3," Add Option "),o()}}function Ie(a,t){a&1&&(n(0,"span"),s(1,"Create Question"),o())}function Ve(a,t){a&1&&(n(0,"span"),s(1,"Save Changes"),o())}function Be(a,t){if(a&1){let e=h();n(0,"div",34),g("click",function(){m(e);let i=d();return p(i.closeNewMCQModal())}),n(1,"div",35),g("click",function(i){return m(e),p(i.stopPropagation())}),n(2,"div",36),f(3,Qe,2,0,"h3",37)(4,Me,2,0,"h3",37),n(5,"button",38),g("click",function(){m(e);let i=d();return p(i.closeNewMCQModal())}),n(6,"mat-icon"),s(7,"close"),o()()(),n(8,"div",39)(9,"div",40)(10,"label"),s(11,"Question Text *"),o(),n(12,"textarea",41),k("ngModelChange",function(i){m(e);let c=d();return M(c.newQuestion.text,i)||(c.newQuestion.text=i),p(i)}),o()(),n(13,"div",40)(14,"label"),s(15,"Teaching Unit *"),o(),n(16,"select",42),k("ngModelChange",function(i){m(e);let c=d();return M(c.newQuestion.teachingUnitId,i)||(c.newQuestion.teachingUnitId=i),p(i)}),n(17,"option",43),s(18,"Select teaching unit"),o(),f(19,ke,2,2,"option",44),o()(),n(20,"div",40)(21,"label"),s(22,"Difficulty *"),o(),n(23,"select",42),k("ngModelChange",function(i){m(e);let c=d();return M(c.newQuestion.difficulty,i)||(c.newQuestion.difficulty=i),p(i)}),n(24,"option",45),s(25,"Level 1 (LEVEL_1)"),o(),n(26,"option",46),s(27,"Level 2 (LEVEL_2)"),o(),n(28,"option",47),s(29,"Level 3 (LEVEL_3)"),o(),n(30,"option",48),s(31,"Level 4 (LEVEL_4)"),o(),n(32,"option",49),s(33,"Level 5 (LEVEL_5)"),o()()(),n(34,"div",40)(35,"label"),s(36,"Answer Type *"),o(),n(37,"div",50)(38,"label",51)(39,"input",52),k("ngModelChange",function(i){m(e);let c=d();return M(c.newQuestion.answerType,i)||(c.newQuestion.answerType=i),p(i)}),o(),n(40,"span"),s(41,"Single answer"),o()()()(),n(42,"div",40)(43,"label"),s(44,"Answer Options *"),o(),n(45,"div",53),f(46,Se,5,5,"div",54),o(),f(47,Oe,4,0,"button",55),o()(),n(48,"div",56)(49,"button",7),g("click",function(){m(e);let i=d();return p(i.closeNewMCQModal())}),s(50,"Cancel"),o(),n(51,"button",57),g("click",function(){m(e);let i=d();return p(i.saveNewQuestion())}),f(52,Ie,2,0,"span",37)(53,Ve,2,0,"span",37),o()()()()}if(a&2){let e=d();l(3),u("ngIf",!e.editingQuestionId),l(),u("ngIf",e.editingQuestionId),l(8),Q("ngModel",e.newQuestion.text),l(4),Q("ngModel",e.newQuestion.teachingUnitId),l(3),u("ngForOf",e.teachingUnits),l(4),Q("ngModel",e.newQuestion.difficulty),l(16),Q("ngModel",e.newQuestion.answerType),l(7),u("ngForOf",e.newQuestion.options),l(),u("ngIf",e.newQuestion.options.length<6),l(4),u("disabled",!e.isNewQuestionValid()),l(),u("ngIf",!e.editingQuestionId),l(),u("ngIf",e.editingQuestionId)}}function Le(a,t){if(a&1&&(n(0,"p",72),s(1),o()),a&2){let e=d(2);l(),T("Selected: ",e.selectedFile.name)}}function De(a,t){if(a&1){let e=h();n(0,"div",34),g("click",function(){m(e);let i=d();return p(i.closeImportModal())}),n(1,"div",35),g("click",function(i){return m(e),p(i.stopPropagation())}),n(2,"div",36)(3,"h3"),s(4,"Import Questions from Excel"),o(),n(5,"button",38),g("click",function(){m(e);let i=d();return p(i.closeImportModal())}),n(6,"mat-icon"),s(7,"close"),o()()(),n(8,"div",39)(9,"div",68),g("click",function(){m(e);let i=d();return p(i.triggerFileInput())}),n(10,"input",69,2),g("change",function(i){m(e);let c=d();return p(c.handleFileSelect(i))}),o(),n(12,"mat-icon"),s(13,"cloud_upload"),o(),n(14,"h4"),s(15,"Click to upload Excel file"),o(),n(16,"p"),s(17,"Supported formats: .xlsx, .xls, .csv"),o(),f(18,Le,2,1,"p",70),o(),n(19,"div",71)(20,"h4"),s(21,"Excel Format Requirements:"),o(),n(22,"ul")(23,"li"),s(24,"Column A: Question Text"),o(),n(25,"li"),s(26,"Column B: Option 1"),o(),n(27,"li"),s(28,"Column C: Option 2"),o(),n(29,"li"),s(30,"Column D: Option 3"),o(),n(31,"li"),s(32,"Column E: Option 4"),o(),n(33,"li"),s(34,"Column F: Correct Answer (1, 2, 3, or 4)"),o(),n(35,"li"),s(36,"Column G: Subject"),o(),n(37,"li"),s(38,"Column H: Difficulty (Easy/Medium/Hard)"),o()()()(),n(39,"div",56)(40,"button",7),g("click",function(){m(e);let i=d();return p(i.closeImportModal())}),s(41,"Cancel"),o(),n(42,"button",57),g("click",function(){m(e);let i=d();return p(i.processImport())}),s(43," Import Questions "),o()()()()}if(a&2){let e=d();l(18),u("ngIf",e.selectedFile),l(24),u("disabled",!e.selectedFile)}}function Fe(a,t){a&1&&(n(0,"span",78),s(1,"(Correct)"),o())}function Ae(a,t){if(a&1&&(n(0,"li")(1,"span"),s(2),o(),n(3,"span",76),s(4),o(),f(5,Fe,2,0,"span",77),o()),a&2){let e=t.$implicit,r=t.index,i=d(3);N("font-weight",e==i.viewQuestionDto.correctAnswer?"600":"400"),l(2),T("",r+1,"."),l(2),x(e),l(),u("ngIf",e==i.viewQuestionDto.correctAnswer)}}function Ne(a,t){if(a&1&&(n(0,"div")(1,"h5"),s(2,"Options"),o(),n(3,"ul"),f(4,Ae,6,5,"li",75),o()()),a&2){let e=d(2);l(4),u("ngForOf",e.viewQuestionDto.proposedAnswers)}}function Ue(a,t){a&1&&(n(0,"div")(1,"p"),s(2,"No options provided for this question."),o()())}function ze(a,t){if(a&1&&(n(0,"div")(1,"h4",73),s(2),o(),n(3,"div",74)(4,"span"),s(5),o()(),f(6,Ne,5,1,"div",37)(7,Ue,3,0,"div",37),o()),a&2){let e=d();l(2),x(e.viewQuestionDto.question),l(3),z("",e.getTeachingUnitDisplayName(e.viewQuestionDto==null?null:e.viewQuestionDto.teachingUnitId)," \u2022 ",e.mapDifficultyLevel(e.viewQuestionDto.difficultyLevel)," \u2022 ",e.viewQuestionDto.usageCount," uses"),l(),u("ngIf",e.viewQuestionDto.proposedAnswers==null?null:e.viewQuestionDto.proposedAnswers.length),l(),u("ngIf",!e.viewQuestionDto.proposedAnswers||e.viewQuestionDto.proposedAnswers.length===0)}}function je(a,t){a&1&&(n(0,"p"),s(1,"Question details not available."),o())}var ue=class a{teacherApi=E(de);router=E(K);cdr=E(W);authStore=E(X);isLoading=!1;errorMessage="";teachingUnits=[];teachingUnitCounts={};allQuestions=[];folders=[{id:"all",name:"All Questions",count:0,isActive:!0}];questions=[];filteredQuestions=[];tableData=[];selectedSubject="";selectedDifficulty="";selectedType="";searchTerm="";activeFolder="all";currentPage=1;itemsPerPage=20;totalQuestions=180;tableColumns=[{key:"text",label:"Question",sortable:!0,width:"40%"},{key:"subject",label:"Subject",sortable:!1,width:"15%"},{key:"difficulty",label:"Difficulty",sortable:!1,width:"10%"},{key:"used",label:"Used",sortable:!1,width:"10%"},{key:"lastEdit",label:"Last edit",sortable:!1,width:"15%"},{key:"actions",label:"Actions",sortable:!1,width:"10%"}];sortColumn=null;sortDirection=null;showNewMCQModal=!1;showImportModal=!1;showViewModal=!1;viewQuestionDto=null;selectedFile=null;editingQuestionId=null;newQuestion={text:"",teachingUnitId:"",difficulty:"LEVEL_3",answerType:"single",options:[{text:"",isCorrect:!0},{text:"",isCorrect:!1},{text:"",isCorrect:!1},{text:"",isCorrect:!1}]};constructor(){}async ngOnInit(){await this.loadTeachingUnits(),this.applyFilters()}async loadTeachingUnits(){this.isLoading=!0,this.errorMessage="";try{this.teachingUnits=await y(this.teacherApi.getMyTeachingUnits()),this.buildFolders()}catch(t){this.errorMessage=t instanceof Error?t.message:"Failed to load teaching units."}finally{this.isLoading=!1,this.cdr.markForCheck()}}buildFolders(){this.folders=[{id:"all",name:"All Questions",count:0,isActive:!0},...this.teachingUnits.map(t=>({id:t.id,name:t.name,count:this.teachingUnitCounts[t.id]??0}))]}async loadQuestionsForTeachingUnit(t){if(!t||t==="all"){this.isLoading=!0;try{let r=(this.teachingUnits||[]).map(w=>y(this.teacherApi.getQuestionBank(w.id)).then(C=>({res:C,tu:w}))),i=await Promise.all(r),c=[];i.forEach(({res:w,tu:C})=>{let P=(w.questions||[]).map(S=>O(b({},S),{teachingUnitId:C.id}));c.push(...P),this.teachingUnitCounts[C.id]=P.length;let B=this.folders.find(S=>S.id===C.id);B&&(B.count=P.length)}),this.allQuestions=c;let _=Object.values(this.teachingUnitCounts).reduce((w,C)=>w+C,0),v=this.folders.find(w=>w.id==="all");v&&(v.count=_),this.mapQuestionsToLegacy()}catch(e){console.error("Failed to load questions for all teaching units:",e)}finally{this.isLoading=!1,this.cdr.markForCheck()}return}this.isLoading=!0;try{let e=await y(this.teacherApi.getQuestionBank(t));this.allQuestions=(e.questions||[]).map(_=>O(b({},_),{teachingUnitId:t})),this.teachingUnitCounts[t]=e.questions.length;let r=this.folders.find(_=>_.id===t);r&&(r.count=e.questions.length);let i=Object.values(this.teachingUnitCounts).reduce((_,v)=>_+v,0),c=this.folders.find(_=>_.id==="all");c&&(c.count=i),this.mapQuestionsToLegacy()}catch(e){console.error("Failed to load past questions:",e)}finally{this.isLoading=!1,this.cdr.markForCheck()}}mapQuestionsToLegacy(){this.questions=this.allQuestions.map((t,e)=>{let i=this.teachingUnits.find(c=>c.id===t.teachingUnitId)?.name??this.getActiveTeachingUnitName();return{id:t.questionId,text:t.question,type:this.mapQuestionType(t.type),subject:i,difficulty:this.mapDifficultyLevel(t.difficultyLevel),options:t.proposedAnswers??[],correctAnswer:t.proposedAnswers?.indexOf(t.correctAnswer??"")??0,usedCount:t.usageCount??1,used:t.usageCount??1,lastEdit:t.createdAt?new Date(t.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric"}):"N/A",folderId:t.teachingUnitId??this.activeFolder,authorId:t.createdById??null,canEdit:!!(this.authStore.getSession()?.user?.entityId&&t.createdById&&this.authStore.getSession().user.entityId===t.createdById)}}),this.applyFilters()}mapDifficultyLevel(t){switch(t){case"LEVEL_1":case"LEVEL_2":return"Easy";case"LEVEL_3":return"Medium";case"LEVEL_4":case"LEVEL_5":return"Hard";default:return"Medium"}}mapQuestionType(t){switch(t){case"SINGLE_CHOICE":case"TRUE_FALSE":return"MCQ";case"MULTIPLE_CHOICE":return"Multi-answer";case"OPEN_ENDED":return"Essay";default:return"MCQ"}}getActiveTeachingUnitName(){return this.activeFolder==="all"?"All subjects":this.teachingUnits.find(e=>e.id===this.activeFolder)?.name??"Unknown"}get paginationStart(){return(this.currentPage-1)*this.itemsPerPage+1}get paginationEnd(){return Math.min(this.currentPage*this.itemsPerPage,this.totalQuestions)}get totalPages(){return Math.ceil(this.totalQuestions/this.itemsPerPage)}selectFolder(t){this.folders.forEach(e=>e.isActive=!1),t.isActive=!0,this.activeFolder=t.id,this.loadQuestionsForTeachingUnit(t.id)}applyFilters(){let t=[...this.questions];this.activeFolder!=="all"&&(t=t.filter(e=>e.folderId===this.activeFolder)),this.selectedSubject&&(t=t.filter(e=>e.subject===this.selectedSubject)),this.selectedDifficulty&&(t=t.filter(e=>e.difficulty===this.selectedDifficulty)),this.selectedType&&(this.selectedType==="MCQ"?t=t.filter(e=>e.type==="MCQ"||e.type==="Multi-answer"):t=t.filter(e=>e.type===this.selectedType)),this.searchTerm&&(t=t.filter(e=>e.text.toLowerCase().includes(this.searchTerm.toLowerCase()))),this.filteredQuestions=t,this.tableData=t.map(e=>b({},e)),this.totalQuestions=t.length}getQuestionTypeText(t){return t.type==="MCQ"?`${t.options?.length||4} options \u2022 Single answer`:t.type==="Multi-answer"?`${t.options?.length||6} options \u2022 Multi answer`:t.type==="Essay"?"Essay prompt \u2022 No marks":t.type}getSubjectClass(t){return t.toLowerCase().replace(/\s+/g,"-")}getTeachingUnitDisplayName(t){return t?this.teachingUnits.find(r=>r.id===t)?.name??this.getActiveTeachingUnitName():this.getActiveTeachingUnitName()}createNewMCQ(){this.newQuestion={text:"",teachingUnitId:"",difficulty:"LEVEL_3",answerType:"single",options:[{text:"",isCorrect:!0},{text:"",isCorrect:!1},{text:"",isCorrect:!1},{text:"",isCorrect:!1}]},this.showNewMCQModal=!0,this.editingQuestionId=null}closeNewMCQModal(){this.showNewMCQModal=!1}isNewQuestionValid(){if(!this.newQuestion.text.trim()||!this.newQuestion.teachingUnitId)return!1;let t=this.newQuestion.options.filter(r=>r.text.trim()),e=this.newQuestion.options.some(r=>r.isCorrect);return t.length>=2&&e}async saveNewQuestion(){if(!this.isNewQuestionValid())return;let t={question:String(this.newQuestion.text).trim(),type:"SINGLE_CHOICE",difficultyLevel:this.newQuestion.difficulty,teachingUnitId:String(this.newQuestion.teachingUnitId),proposedAnswers:this.newQuestion.options.map(e=>String(e.text).trim()),correctAnswer:(()=>{let e=this.newQuestion.options.find(r=>r.isCorrect);return e?String(e.text).trim():void 0})()};try{if(this.editingQuestionId)await y(this.teacherApi.updateQuestionInBank(this.editingQuestionId,{question:t.question,difficultyLevel:t.difficultyLevel,proposedAnswers:t.proposedAnswers,correctAnswer:t.correctAnswer})),alert("Question updated successfully!"),this.closeNewMCQModal(),await this.loadQuestionsForTeachingUnit(this.activeFolder==="all"?"all":t.teachingUnitId);else{let e=await y(this.teacherApi.createQuestionInBank(t));alert("Question created successfully!"),this.closeNewMCQModal(),(this.activeFolder===t.teachingUnitId||this.activeFolder==="all")&&await this.loadQuestionsForTeachingUnit(t.teachingUnitId)}}catch(e){console.error("Failed to save question in bank:",e),alert("Failed to save question.")}}isOptionCorrect(t){return this.newQuestion.options[t]?.isCorrect||!1}setCorrectOption(t){this.newQuestion.answerType==="single"&&this.newQuestion.options.forEach((e,r)=>{e.isCorrect=r===t})}toggleCorrectOption(t,e){this.newQuestion.answerType==="multiple"&&(this.newQuestion.options[t].isCorrect=e.target.checked)}addOption(){this.newQuestion.options.length<6&&this.newQuestion.options.push({text:"",isCorrect:!1})}removeOption(t){this.newQuestion.options.length>2&&this.newQuestion.options.splice(t,1)}editQuestion(t){let e=this.allQuestions.find(i=>i.questionId===t.id),r=(e?.proposedAnswers??t.options??[]).map(i=>({text:i,isCorrect:String(i)===String(e?.correctAnswer??"")}));for(;r.length<2;)r.push({text:"",isCorrect:!1});this.newQuestion={text:t.text,teachingUnitId:e?.teachingUnitId??t.folderId,difficulty:e?.difficultyLevel??"LEVEL_3",answerType:t.type==="Multi-answer"?"multiple":"single",options:r},this.editingQuestionId=t.id,this.showNewMCQModal=!0}viewQuestion(t){let e=this.allQuestions.find(r=>r.questionId===t.id)??null;e?this.viewQuestionDto=e:this.viewQuestionDto={questionId:t.id,question:t.text,type:t.type==="Essay"?"OPEN_ENDED":"SINGLE_CHOICE",difficultyLevel:t.difficulty==="Easy"?"LEVEL_2":t.difficulty==="Hard"?"LEVEL_4":"LEVEL_3",proposedAnswers:t.options??[],correctAnswer:t.options&&t.correctAnswer!==void 0?t.options[t.correctAnswer]:void 0,createdById:t.authorId??null,createdByName:null,createdAt:new Date().toISOString(),usageCount:t.usedCount??0,teachingUnitId:t.folderId},this.showViewModal=!0}closeViewModal(){this.showViewModal=!1,this.viewQuestionDto=null}importExcel(){this.selectedFile=null,this.showImportModal=!0}closeImportModal(){this.showImportModal=!1,this.selectedFile=null}triggerFileInput(){document.querySelector('input[type="file"]')?.click()}handleFileSelect(t){let e=t.target.files[0];e&&(this.selectedFile=e)}processImport(){this.selectedFile&&(console.log("Processing import for file:",this.selectedFile.name),alert(`Import functionality would process: ${this.selectedFile.name}`),this.closeImportModal())}previousPage(){this.currentPage>1&&this.currentPage--}nextPage(){this.currentPage<this.totalPages&&this.currentPage++}onTablePageChange(t){this.currentPage=t}onTablePageSizeChange(t){this.itemsPerPage=t,this.currentPage=1}onTableSearch(t){this.searchTerm=t||"",this.applyFilters()}onSortChange(t){if(this.sortColumn=t.column,this.sortDirection=t.direction,this.applyFilters(),this.sortColumn&&this.sortDirection){let e=this.sortDirection==="asc"?1:-1;this.filteredQuestions.sort((r,i)=>{let c=this.sortColumn,_=r[c],v=i[c];return _==null&&v==null?0:_==null?-1*e:v==null?1*e:c==="used"?(Number(_)-Number(v))*e:String(_).localeCompare(String(v))*e}),this.tableData=this.filteredQuestions.map(r=>b({},r))}else this.tableData=this.filteredQuestions.map(e=>b({},e))}getCellDefault(t,e){return t[e.key]}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=L({type:a,selectors:[["app-teacher-question-bank"]],decls:35,vars:19,consts:[["cell",""],["noData",""],["fileInput",""],[1,"question-bank"],[1,"page-header"],[1,"header-content"],[1,"header-actions"],[1,"btn","secondary",3,"click"],[1,"btn","primary",3,"click"],[1,"bank-content"],[1,"folders-sidebar"],[1,"folders-list"],["class","folder-item",3,"active","click",4,"ngFor","ngForOf"],[1,"questions-content"],[3,"pageChange","pageSizeChange","searchChange","sortChange","columns","data","pagination","sortColumn","sortDirection","searchable","showPagination"],["class","modal-overlay",3,"click",4,"ngIf"],[3,"closed","isOpen","title","showFooter"],[4,"ngIf","ngIfElse"],["slot","footer"],[1,"folder-item",3,"click"],[1,"folder-name"],[1,"folder-count"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"question-content"],[1,"question-meta"],[1,"question-type"],[1,"subject-badge"],[1,"difficulty-badge"],["class","action-btn edit",3,"click",4,"ngIf"],["class","action-btn view",3,"click",4,"ngIf"],[1,"action-btn","edit",3,"click"],[1,"action-btn","view",3,"click"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[4,"ngIf"],[1,"close-btn",3,"click"],[1,"modal-body"],[1,"form-group"],["placeholder","Enter your question here...","rows","3",1,"form-textarea",3,"ngModelChange","ngModel"],[1,"form-select",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["value","LEVEL_1"],["value","LEVEL_2"],["value","LEVEL_3"],["value","LEVEL_4"],["value","LEVEL_5"],[1,"radio-group"],[1,"radio-option"],["type","radio","value","single",3,"ngModelChange","ngModel"],[1,"options-list"],["class","option-input",4,"ngFor","ngForOf"],["class","btn secondary small",3,"click",4,"ngIf"],[1,"modal-footer"],[1,"btn","primary",3,"click","disabled"],[3,"value"],[1,"option-input"],["type","checkbox",3,"checked","change",4,"ngIf"],["type","radio",3,"name","checked","change",4,"ngIf"],["type","text",1,"form-input",3,"ngModelChange","ngModel","placeholder"],["class","remove-option",3,"click",4,"ngIf"],["type","checkbox",3,"change","checked"],["type","radio",3,"change","name","checked"],[1,"remove-option",3,"click"],[1,"btn","secondary","small",3,"click"],[1,"upload-area",3,"click"],["type","file","accept",".xlsx,.xls,.csv",2,"display","none",3,"change"],["class","file-info",4,"ngIf"],[1,"import-instructions"],[1,"file-info"],[2,"margin-bottom","0.5rem"],[2,"font-size","0.9rem","color","var(--color-text-secondary)","margin-bottom","1rem"],[3,"fontWeight",4,"ngFor","ngForOf"],[2,"margin-left","0.5rem"],["style","color:var(--color-success-600); margin-left:0.5rem",4,"ngIf"],[2,"color","var(--color-success-600)","margin-left","0.5rem"]],template:function(e,r){if(e&1){let i=h();n(0,"div",3)(1,"div",4)(2,"div",5)(3,"h1"),s(4,"Question Bank"),o(),n(5,"p"),s(6,"All MCQ items. Each exam auto-includes one sentiment essay prompt."),o()(),n(7,"div",6)(8,"button",7),g("click",function(){return m(i),p(r.importExcel())}),n(9,"mat-icon"),s(10,"upload_file"),o(),s(11," Import Excel "),o(),n(12,"button",8),g("click",function(){return m(i),p(r.createNewMCQ())}),n(13,"mat-icon"),s(14,"add"),o(),s(15," + New MCQ "),o()()(),n(16,"div",9)(17,"div",10)(18,"h3"),s(19,"Folders"),o(),n(20,"div",11),f(21,pe,5,4,"div",12),o()(),n(22,"div",13)(23,"ui-table",14),g("pageChange",function(_){return m(i),p(r.onTablePageChange(_))})("pageSizeChange",function(_){return m(i),p(r.onTablePageSizeChange(_))})("searchChange",function(_){return m(i),p(r.onTableSearch(_))})("sortChange",function(_){return m(i),p(r.onSortChange(_))}),f(24,ye,8,7,"ng-template",null,0,V),o()()(),f(26,Be,54,12,"div",15)(27,De,44,2,"div",15),o(),n(28,"ui-modal",16),g("closed",function(){return m(i),p(r.closeViewModal())}),f(29,ze,8,6,"div",17)(30,je,2,0,"ng-template",null,1,V),n(32,"div",18)(33,"button",7),g("click",function(){return m(i),p(r.closeViewModal())}),s(34,"Close"),o()()()}if(e&2){let i=A(31);l(21),u("ngForOf",r.folders),l(2),u("columns",r.tableColumns)("data",r.tableData)("pagination",j(15,me,r.currentPage,r.itemsPerPage,r.totalQuestions))("sortColumn",r.sortColumn)("sortDirection",r.sortDirection)("searchable",!0)("showPagination",!0),l(3),u("ngIf",r.showNewMCQModal),l(),u("ngIf",r.showImportModal),l(),u("isOpen",r.showViewModal)("title","Question Details")("showFooter",!0),l(),u("ngIf",r.viewQuestionDto)("ngIfElse",i)}},dependencies:[J,H,R,$,q,G,se,ae,re,ie,oe,Y,ne,te,Z,ee,ce,le],styles:[".question-bank[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:2rem}@media (max-width: 768px){.page-header[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:600;margin-bottom:.5rem;color:var(--color-text-primary)}.header-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--color-text-secondary);font-size:1rem}.header-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem}.bank-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:250px 1fr;gap:2rem}@media (max-width: 1024px){.bank-content[_ngcontent-%COMP%]{grid-template-columns:1fr}}.folders-sidebar[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1.5rem;box-shadow:0 2px 8px #0000001a;height:fit-content}.folders-sidebar[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;margin-bottom:1rem;color:var(--color-text-primary)}.folders-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.folder-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.75rem;border-radius:8px;cursor:pointer;transition:all .2s}.folder-item[_ngcontent-%COMP%]:hover{background:var(--color-background-subtle)}.folder-item.active[_ngcontent-%COMP%]{background:var(--color-primary-100);color:var(--color-primary-700);font-weight:500}.folder-item[_ngcontent-%COMP%]   .folder-name[_ngcontent-%COMP%]{flex:1}.folder-item[_ngcontent-%COMP%]   .folder-count[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-secondary)}.questions-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1.5rem;box-shadow:0 2px 8px #0000001a}.filter-select[_ngcontent-%COMP%], .search-input[_ngcontent-%COMP%]{padding:.5rem .75rem;border:1px solid var(--color-border);border-radius:6px;font-size:.875rem;min-width:120px}.search-input[_ngcontent-%COMP%]{flex:1;min-width:200px}.questions-table[_ngcontent-%COMP%]{border:1px solid var(--color-border);border-radius:8px;overflow:hidden}.table-header[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr 1fr 1fr 1fr 1fr;background:var(--color-background-subtle);padding:1rem;font-weight:600;font-size:.875rem;color:var(--color-text-secondary);border-bottom:1px solid var(--color-border)}.question-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr 1fr 1fr 1fr 1fr;padding:1rem;border-bottom:1px solid var(--color-border);align-items:center}.question-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.question-row[_ngcontent-%COMP%]:hover{background:var(--color-background-subtle)}.col-question[_ngcontent-%COMP%]   .question-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;margin-bottom:.25rem;color:var(--color-text-primary);line-height:1.4}.col-question[_ngcontent-%COMP%]   .question-meta[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-secondary)}.subject-badge[_ngcontent-%COMP%]{padding:.25rem .5rem;border-radius:4px;font-size:.75rem;font-weight:500}.subject-badge.ai-systems[_ngcontent-%COMP%]{background:var(--color-primary-100);color:var(--color-primary-700)}.subject-badge.networks[_ngcontent-%COMP%]{background:var(--color-success-100);color:var(--color-success-700)}.subject-badge.web-dev[_ngcontent-%COMP%]{background:var(--color-warning-100);color:var(--color-warning-700)}.subject-badge.all-subjects[_ngcontent-%COMP%]{background:var(--color-background-muted);color:var(--color-text-secondary)}.difficulty-badge[_ngcontent-%COMP%]{padding:.25rem .5rem;border-radius:4px;font-size:.75rem;font-weight:500}.difficulty-badge.easy[_ngcontent-%COMP%]{background:var(--color-success-100);color:var(--color-success-700)}.difficulty-badge.medium[_ngcontent-%COMP%]{background:var(--color-warning-100);color:var(--color-warning-700)}.difficulty-badge.hard[_ngcontent-%COMP%]{background:var(--color-error-100);color:var(--color-error-700)}.action-btn[_ngcontent-%COMP%]{padding:.375rem .75rem;border:1px solid var(--color-border);background:#fff;border-radius:4px;font-size:.75rem;cursor:pointer;transition:all .2s}.action-btn.edit[_ngcontent-%COMP%]{color:var(--color-primary-600);border-color:var(--color-primary-200)}.action-btn.edit[_ngcontent-%COMP%]:hover{background:var(--color-primary-50)}.action-btn.view[_ngcontent-%COMP%]{color:var(--color-text-secondary)}.action-btn.view[_ngcontent-%COMP%]:hover{background:var(--color-background-subtle)}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:1.5rem;padding-top:1.5rem;border-top:1px solid var(--color-border)}.pagination-info[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-secondary)}.pagination-controls[_ngcontent-%COMP%]{display:flex;gap:.5rem}.page-btn[_ngcontent-%COMP%]{padding:.5rem 1rem;border:1px solid var(--color-border);background:#fff;border-radius:6px;cursor:pointer;transition:all .2s;font-size:.875rem}.page-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--color-background-subtle)}.page-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem 1.5rem;border:none;border-radius:8px;font-weight:500;cursor:pointer;transition:all .2s;text-decoration:none}.btn.primary[_ngcontent-%COMP%]{background:var(--color-primary-600);color:#fff}.btn.primary[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--color-primary-700)}.btn.primary[_ngcontent-%COMP%]:disabled{background:var(--color-background-muted);color:var(--color-text-secondary);cursor:not-allowed}.btn.secondary[_ngcontent-%COMP%]{background:var(--color-background-subtle);color:var(--color-text-primary);border:1px solid var(--color-border)}.btn.secondary[_ngcontent-%COMP%]:hover{background:var(--color-background-muted)}.btn.small[_ngcontent-%COMP%]{padding:.5rem 1rem;font-size:.875rem}.btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.25rem;width:1.25rem;height:1.25rem}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;width:90%;max-width:600px;max-height:90vh;overflow-y:auto;box-shadow:0 20px 60px #0000004d}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.5rem;border-bottom:1px solid var(--color-border)}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:var(--color-text-primary)}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{padding:.5rem;background:transparent;border:none;border-radius:6px;cursor:pointer}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:var(--color-background-subtle)}.modal-body[_ngcontent-%COMP%]{padding:1.5rem}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.75rem;padding:1.5rem;border-top:1px solid var(--color-border)}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:.875rem;font-weight:500;color:var(--color-text-primary);margin-bottom:.5rem}.form-input[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%], .form-textarea[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid var(--color-border);border-radius:6px;font-size:.875rem;transition:border-color .2s}.form-input[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus, .form-textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary-500)}.form-textarea[_ngcontent-%COMP%]{resize:vertical;min-height:80px}.radio-group[_ngcontent-%COMP%]{display:flex;gap:1rem}.radio-option[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;cursor:pointer}.radio-option[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{margin:0}.options-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem;margin-bottom:1rem}.option-input[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.option-input[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%], .option-input[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin:0}.option-input[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{flex:1}.option-input[_ngcontent-%COMP%]   .remove-option[_ngcontent-%COMP%]{padding:.25rem;background:transparent;border:none;color:var(--color-error-600);cursor:pointer;border-radius:4px}.option-input[_ngcontent-%COMP%]   .remove-option[_ngcontent-%COMP%]:hover{background:var(--color-error-50)}.option-input[_ngcontent-%COMP%]   .remove-option[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1rem;width:1rem;height:1rem}.upload-area[_ngcontent-%COMP%]{border:2px dashed var(--color-border);border-radius:8px;padding:2rem;text-align:center;cursor:pointer;transition:all .2s;margin-bottom:1.5rem}.upload-area[_ngcontent-%COMP%]:hover{border-color:var(--color-primary-500);background:var(--color-primary-50)}.upload-area[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:3rem;width:3rem;height:3rem;color:var(--color-text-secondary);margin-bottom:1rem}.upload-area[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:500;margin-bottom:.5rem;color:var(--color-text-primary)}.upload-area[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--color-text-secondary);margin-bottom:.25rem}.upload-area[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]{color:var(--color-primary-600);font-weight:500}.import-instructions[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;margin-bottom:.75rem;color:var(--color-text-primary)}.import-instructions[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding-left:1.25rem}.import-instructions[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:.5rem;font-size:.875rem;color:var(--color-text-secondary)}"]})};export{ue as TeacherQuestionBank};
