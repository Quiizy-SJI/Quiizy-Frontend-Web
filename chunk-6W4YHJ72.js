import{a as B}from"./chunk-TQBAXRVG.js";import"./chunk-MSJ3XUEL.js";import"./chunk-MD74L3HJ.js";import"./chunk-FWCO3CJY.js";import{f as W,j as U,s as j}from"./chunk-AO6LNOWB.js";import"./chunk-SJBCNNOS.js";import{a as N}from"./chunk-2WUHN5CQ.js";import"./chunk-MAWX5T35.js";import{c as q,d as L,e as z,f as D,g as R,l as T,n as A,t as H}from"./chunk-XGVRFAFZ.js";import{a as V,b as F}from"./chunk-4BWE2P25.js";import"./chunk-LUIYB3PI.js";import{d as I}from"./chunk-LM6INHLT.js";import{$a as s,Ab as b,Db as u,Eb as f,Fb as h,Ka as w,Oa as P,Xb as S,Z as _,ab as t,ba as c,bb as n,ca as p,cb as d,hc as k,jb as v,lb as y,nb as M,p as C,rc as E,yb as i,za as g,zb as O}from"./chunk-3XB4H34J.js";function G(m,o){if(m&1){let r=v();t(0,"ui-alert",48),y("dismissed",function(){c(r);let l=M();return p(l.errorMessage="")}),i(1),n()}if(m&2){let r=M();s("title","Authentication Failed")("dismissible",!0),g(),b(" ",r.errorMessage," ")}}var Y=class m{authService=_(B);router=_(I);cdr=_(S);loginRequest={identifier:"",password:"",rememberMe:!1,role:"TEACHER"};isLoading=!1;errorMessage="";roleError="";identifierError="";passwordError="";roleOptions=[{value:"TEACHER",label:"Teacher",icon:"\u{1F468}\u200D\u{1F3EB}"},{value:"SPECIALITY_HEAD",label:"Speciality Head",icon:"\u{1F4CB}"},{value:"DEAN",label:"Dean (Administrator)",icon:"\u{1F3DB}\uFE0F"}];currentYear=new Date().getFullYear();cyclingInterval;currentSlideIndex=0;totalSlides=5;ngOnInit(){this.startImageCycling()}ngOnDestroy(){this.cyclingInterval&&clearInterval(this.cyclingInterval)}startImageCycling(){this.cyclingInterval=window.setInterval(()=>{this.cycleToNextSlide()},4e3)}cycleToNextSlide(){let o=document.querySelector(`.login-page__slide[data-slide="${this.currentSlideIndex}"]`),r=document.querySelector(`.login-page__text-slide[data-text="${this.currentSlideIndex}"]`);o&&o.classList.remove("active"),r&&r.classList.remove("active"),this.currentSlideIndex=(this.currentSlideIndex+1)%this.totalSlides;let e=document.querySelector(`.login-page__slide[data-slide="${this.currentSlideIndex}"]`),l=document.querySelector(`.login-page__text-slide[data-text="${this.currentSlideIndex}"]`);e&&e.classList.add("active"),l&&l.classList.add("active")}get identifierLabel(){return this.loginRequest.role==="STUDENT"?"Matricule":"Email Address"}get identifierPlaceholder(){return this.loginRequest.role==="STUDENT"?"Enter your student matricule":"Enter your email address"}validateForm(){let o=!0;return this.roleError="",this.identifierError="",this.passwordError="",this.loginRequest.role||(this.roleError="Please select your role",o=!1),this.loginRequest.identifier?.trim()||(this.identifierError=this.loginRequest.role==="STUDENT"?"Please enter your matricule":"Please enter your email address",o=!1),this.loginRequest.password?this.loginRequest.password.length<6&&(this.passwordError="Password must be at least 6 characters",o=!1):(this.passwordError="Please enter your password",o=!1),o}async onSubmit(){if(this.errorMessage="",!!this.validateForm()){this.isLoading=!0;try{let o=await C(this.authService.login(this.loginRequest)),r=this.getLandingUrlForRole(o.user.role);try{await this.router.navigateByUrl(r)}catch(e){if((e instanceof Error?e.message:String(e)).includes("Failed to fetch dynamically imported module")){window.location.assign(r);return}throw e}}catch(o){this.errorMessage=o instanceof Error?o.message:"An error occurred during sign in. Please try again.",this.cdr.markForCheck()}finally{this.isLoading=!1,this.cdr.markForCheck()}}}getLandingUrlForRole(o){switch(o){case"DEAN":return"/dean";case"TEACHER":return"/teacher";case"SPECIALITY_HEAD":return"/head";case"STUDENT":return"/showcase";default:return"/showcase"}}static \u0275fac=function(r){return new(r||m)};static \u0275cmp=w({type:m,selectors:[["app-login"]],decls:77,vars:25,consts:[["loginForm","ngForm"],[1,"login-page"],[1,"login-page__background"],[1,"login-page__container"],[1,"login-page__image-card"],[1,"login-page__quizzy-brand"],[1,"login-page__logo-circle"],[1,"login-page__logo-text"],["src","assets/images/logos/iusj-logo.png","alt","IUSJ logo",1,"login-page__school-logo",2,"border-radius","20px"],[1,"login-page__image-slider"],["data-slide","0",1,"login-page__slide","active"],["src","https://images.unsplash.com/photo-1606326608606-aa0b62935f2b?q=80&w=1170&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D","alt","Students taking quiz"],["data-slide","1",1,"login-page__slide"],["src","https://images.unsplash.com/photo-1670852714979-f73d21652a83?q=80&w=1169&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D","alt","Classroom examination"],["data-slide","2",1,"login-page__slide"],["src","https://images.unsplash.com/photo-1509062522246-3755977927d7?w=800&h=600&fit=crop","alt","Students studying together"],["data-slide","3",1,"login-page__slide"],["src","https://images.unsplash.com/photo-1522202176988-66273c2fd55f?w=800&h=600&fit=crop","alt","Group quiz session"],["data-slide","4",1,"login-page__slide"],["src","https://images.unsplash.com/photo-1460925895917-afdab827c52f?q=80&w=1115&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D","alt","Digital learning platform"],[1,"login-page__overlay-content"],[1,"login-page__text-slider"],["data-text","0",1,"login-page__text-slide","active"],[1,"login-page__hero-title"],["data-text","1",1,"login-page__text-slide"],["data-text","2",1,"login-page__text-slide"],["data-text","3",1,"login-page__text-slide"],["data-text","4",1,"login-page__text-slide"],[1,"login-page__form-card"],[1,"login-page__theme-toggle"],[1,"login-page__form-header"],[1,"login-page__form-title"],[1,"login-page__form-subtitle"],[1,"login-page__form",3,"ngSubmit"],["variant","soft","color","danger",3,"title","dismissible","dismissed",4,"ngIf"],[1,"login-page__field"],[1,"login-page__label"],["placeholder","Teacher","name","role",3,"ngModelChange","options","ngModel","required","validationState","errorMessage","iconLeft"],["slot","icon-left"],["name","identifier","autocomplete","username",3,"ngModelChange","placeholder","type","ngModel","required","validationState","errorMessage","iconLeft"],["placeholder","Enter your password","type","password","name","password","autocomplete","current-password",3,"ngModelChange","ngModel","required","showPasswordToggle","validationState","errorMessage","iconLeft"],[1,"login-page__forgot-password"],["href","mailto:support@quizzy.edu",1,"login-page__forgot-link"],[1,"login-page__submit"],["type","submit","variant","solid","color","primary","size","lg",3,"fullWidth","loading","disabled"],[1,"login-page__signup"],[1,"login-page__signup-text"],["href","#",1,"login-page__signup-link"],["variant","soft","color","danger",3,"dismissed","title","dismissible"]],template:function(r,e){if(r&1){let l=v();t(0,"section",1),d(1,"div",2),t(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6)(6,"span",7),i(7,"Q"),n()(),d(8,"img",8),n(),t(9,"div",9)(10,"div",10),d(11,"img",11),n(),t(12,"div",12),d(13,"img",13),n(),t(14,"div",14),d(15,"img",15),n(),t(16,"div",16),d(17,"img",17),n(),t(18,"div",18),d(19,"img",19),n()(),t(20,"div",20)(21,"div",21)(22,"div",22)(23,"h2",23),i(24,"Smart Quiz Management"),n()(),t(25,"div",24)(26,"h2",23),i(27,"Seamless Digital Examinations"),n()(),t(28,"div",25)(29,"h2",23),i(30,"Collaborative Learning Excellence"),n()(),t(31,"div",26)(32,"h2",23),i(33,"Interactive Knowledge Hub"),n()(),t(34,"div",27)(35,"h2",23),i(36,"Advanced Analytics & Insights"),n()()()()(),t(37,"div",28)(38,"div",29),d(39,"ui-theme-toggle"),n(),t(40,"div",30)(41,"h2",31),i(42,"Welcome Back "),n(),t(43,"p",32),i(44,"Login to access your Quizzy dashboard"),n()(),t(45,"form",33,0),y("ngSubmit",function(){return c(l),p(e.onSubmit())}),P(47,G,2,3,"ui-alert",34),t(48,"div",35)(49,"label",36),i(50,"Select Role"),n(),t(51,"ui-select",37),h("ngModelChange",function(a){return c(l),f(e.loginRequest.role,a)||(e.loginRequest.role=a),p(a)}),t(52,"mat-icon",38),i(53,"person_outline"),n()()(),t(54,"div",35)(55,"label",36),i(56),n(),t(57,"ui-input",39),h("ngModelChange",function(a){return c(l),f(e.loginRequest.identifier,a)||(e.loginRequest.identifier=a),p(a)}),t(58,"mat-icon",38),i(59,"email"),n()()(),t(60,"div",35)(61,"label",36),i(62,"Password"),n(),t(63,"ui-input",40),h("ngModelChange",function(a){return c(l),f(e.loginRequest.password,a)||(e.loginRequest.password=a),p(a)}),t(64,"mat-icon",38),i(65,"lock_outline"),n()()(),t(66,"div",41)(67,"a",42),i(68,"Forgot Password?"),n()(),t(69,"div",43)(70,"ui-button",44),i(71),n()(),t(72,"div",45)(73,"p",46),i(74," Don't have an account? "),t(75,"a",47),i(76,"Contact Administrator"),n()()()()()()()}r&2&&(g(47),s("ngIf",e.errorMessage),g(4),s("options",e.roleOptions),u("ngModel",e.loginRequest.role),s("required",!0)("validationState",e.roleError?"invalid":"default")("errorMessage",e.roleError)("iconLeft",!0),g(5),O(e.identifierLabel),g(),s("placeholder",e.identifierPlaceholder)("type",e.loginRequest.role==="STUDENT"?"text":"email"),u("ngModel",e.loginRequest.identifier),s("required",!0)("validationState",e.identifierError?"invalid":"default")("errorMessage",e.identifierError)("iconLeft",!0),g(6),u("ngModel",e.loginRequest.password),s("required",!0)("showPasswordToggle",!0)("validationState",e.passwordError?"invalid":"default")("errorMessage",e.passwordError)("iconLeft",!0),g(7),s("fullWidth",!0)("loading",e.isLoading)("disabled",e.isLoading),g(),b(" ",e.isLoading?"Signing in...":"Login"," "))},dependencies:[E,k,A,R,q,L,T,D,z,F,V,H,W,N,U,j],styles:['.login-page[_ngcontent-%COMP%]{position:relative;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:2rem;background:var(--surface-base)}@media (max-width: 768px){.login-page[_ngcontent-%COMP%]{padding:1rem}}.login-page__background[_ngcontent-%COMP%]{position:fixed;inset:0;background-image:url(https://images.unsplash.com/photo-1557804506-669a67965ba0?w=1920&h=1080&fit=crop);background-size:cover;background-position:center;background-repeat:no-repeat;filter:blur(12px);transform:scale(1.1);z-index:0}.login-page__background[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:0;background:var(--gradient-primary);opacity:.12}.login-page__container[_ngcontent-%COMP%]{position:relative;z-index:1;display:flex;max-width:1000px;width:100%;border-radius:20px;overflow:hidden;box-shadow:var(--elevation-5)}[data-theme=dark][_ngcontent-%COMP%]   .login-page__container[_ngcontent-%COMP%]{box-shadow:0 25px 50px -12px #00000080}@media (max-width: 768px){.login-page__container[_ngcontent-%COMP%]{flex-direction:column;max-width:400px}}.login-page__image-card[_ngcontent-%COMP%]{flex:1;position:relative;background:var(--surface-base);min-height:600px}@media (max-width: 768px){.login-page__image-card[_ngcontent-%COMP%]{min-height:350px}}.login-page[_ngcontent-%COMP%]   .login-page__school-logo[_ngcontent-%COMP%]{border-radius:20px}.login-page__quizzy-brand[_ngcontent-%COMP%]{position:absolute;top:2rem;left:2rem;width:max-content;z-index:3;display:flex;align-items:center;justify-content:center;gap:1rem;background:var(--glass-bg);padding:1rem 1.5rem;border-radius:15px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);box-shadow:var(--elevation-2)}[data-theme=dark][_ngcontent-%COMP%]   .login-page__quizzy-brand[_ngcontent-%COMP%]{background:var(--glass-bg);box-shadow:var(--elevation-3)}.login-page[_ngcontent-%COMP%]   .logo-text[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--color-secondary-500) 0%,var(--color-primary-500) 100%);-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;color:transparent}.login-page__logo-circle[_ngcontent-%COMP%]{width:48px;height:48px;background:linear-gradient(135deg,var(--color-secondary-500) 0%,var(--color-primary-500) 100%);border-radius:50%;display:flex;align-items:center;justify-content:center;flex-shrink:0;box-shadow:var(--shadow-primary)}.login-page__school-logo[_ngcontent-%COMP%]{height:40px;width:auto;display:block;object-fit:contain;margin-right:.25rem}.login-page__logo-text[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:800;color:var(--text-inverse);text-shadow:0 2px 4px rgba(0,0,0,.2)}.login-page__brand-text[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:800;color:var(--text-primary);letter-spacing:.1em}[data-theme=dark][_ngcontent-%COMP%]   .login-page__brand-text[_ngcontent-%COMP%]{color:var(--text-inverse)}.login-page__image-slider[_ngcontent-%COMP%]{position:absolute;inset:0}.login-page__slide[_ngcontent-%COMP%]{position:absolute;inset:0;opacity:0;transition:opacity 1.5s ease-in-out}.login-page__slide.active[_ngcontent-%COMP%]{opacity:1}.login-page__slide[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.login-page__slide[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:0;background:var(--gradient-primary);opacity:.16}[data-theme=dark][_ngcontent-%COMP%]   .login-page__slide[_ngcontent-%COMP%]:after{background:var(--surface-overlay);opacity:.7}.login-page__overlay-content[_ngcontent-%COMP%]{position:absolute;top:50%;left:0;right:0;transform:translateY(-50%);padding:3rem 2rem;color:var(--text-inverse);z-index:2;display:flex;align-items:center;justify-content:center}@media (max-width: 768px){.login-page__overlay-content[_ngcontent-%COMP%]{padding:2rem 1.5rem}}.login-page__text-slider[_ngcontent-%COMP%]{position:relative;max-width:450px;width:100%;text-align:center}.login-page__text-slide[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;opacity:0;transition:opacity 1.5s ease-in-out}.login-page__text-slide.active[_ngcontent-%COMP%]{opacity:1}.login-page__hero-title[_ngcontent-%COMP%]{font-size:2.75rem;font-weight:800;margin:0;line-height:1.1;text-shadow:0 4px 8px rgba(0,0,0,.5);text-align:center;color:var(--text-inverse)}@media (max-width: 1024px){.login-page__hero-title[_ngcontent-%COMP%]{font-size:2.25rem}}@media (max-width: 768px){.login-page__hero-title[_ngcontent-%COMP%]{font-size:1.75rem}}.login-page__form-card[_ngcontent-%COMP%]{flex:1;background:var(--surface-raised);padding:3rem;position:relative;display:flex;flex-direction:column;justify-content:center}@media (max-width: 768px){.login-page__form-card[_ngcontent-%COMP%]{padding:2rem 1.5rem}}.login-page__theme-toggle[_ngcontent-%COMP%]{position:absolute;top:1.5rem;right:1.5rem;z-index:10}.login-page__form-header[_ngcontent-%COMP%]{margin-bottom:2.5rem;margin-top:1rem}.login-page__form-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:800;margin:0 0 .75rem;background:var(--gradient-primary);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}[data-theme=dark][_ngcontent-%COMP%]   .login-page__form-title[_ngcontent-%COMP%]{background:var(--gradient-primary);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.login-page__form-subtitle[_ngcontent-%COMP%]{font-size:.95rem;color:var(--text-muted);margin:0}[data-theme=dark][_ngcontent-%COMP%]   .login-page__form-subtitle[_ngcontent-%COMP%]{color:var(--text-muted)}.login-page__form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.75rem}.login-page__field[_ngcontent-%COMP%]{width:100%}.login-page__label[_ngcontent-%COMP%]{display:block;font-size:.9rem;font-weight:600;color:var(--text-secondary);margin-bottom:.6rem}[data-theme=dark][_ngcontent-%COMP%]   .login-page__label[_ngcontent-%COMP%]{color:var(--text-inverse)}.login-page__forgot-password[_ngcontent-%COMP%]{text-align:right;margin-top:-.5rem}.login-page__forgot-link[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-primary-500);text-decoration:none;font-weight:600;transition:all .2s ease}.login-page__forgot-link[_ngcontent-%COMP%]:hover{color:var(--color-primary-600);text-decoration:underline}[data-theme=dark][_ngcontent-%COMP%]   .login-page__forgot-link[_ngcontent-%COMP%]{color:var(--color-primary-400)}[data-theme=dark][_ngcontent-%COMP%]   .login-page__forgot-link[_ngcontent-%COMP%]:hover{color:var(--color-primary-200)}.login-page__submit[_ngcontent-%COMP%]{margin-top:.75rem}.login-page__signup[_ngcontent-%COMP%]{text-align:center;margin-top:1.25rem}.login-page__signup-text[_ngcontent-%COMP%]{font-size:.875rem;color:var(--text-muted);margin:0}[data-theme=dark][_ngcontent-%COMP%]   .login-page__signup-text[_ngcontent-%COMP%]{color:var(--text-muted)}.login-page__signup-link[_ngcontent-%COMP%]{color:var(--color-primary-500);text-decoration:none;font-weight:600;transition:all .2s ease}.login-page__signup-link[_ngcontent-%COMP%]:hover{color:var(--color-primary-600);text-decoration:underline}[data-theme=dark][_ngcontent-%COMP%]   .login-page__signup-link[_ngcontent-%COMP%]{color:var(--color-primary-400)}[data-theme=dark][_ngcontent-%COMP%]   .login-page__signup-link[_ngcontent-%COMP%]:hover{color:var(--color-primary-200)}@keyframes _ngcontent-%COMP%_slideInLeft{0%{opacity:0;transform:translate(-50px)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_slideInRight{0%{opacity:0;transform:translate(50px)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_logoFloat{0%,to{transform:translateY(0)}50%{transform:translateY(-5px)}}.login-page__image-card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideInLeft .8s ease-out}.login-page__form-card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideInRight .8s ease-out .2s both}.login-page__quizzy-brand[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .6s ease-out .4s both,_ngcontent-%COMP%_logoFloat 3s ease-in-out 2s infinite}.login-page__overlay-content[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .8s ease-out .6s both}@media (max-width: 768px){.login-page__container[_ngcontent-%COMP%]{border-radius:16px}.login-page__image-card[_ngcontent-%COMP%]{order:1}.login-page__form-card[_ngcontent-%COMP%]{order:2}.login-page__quizzy-brand[_ngcontent-%COMP%]{top:1.5rem;left:1.5rem;padding:.75rem 1rem}.login-page__logo-circle[_ngcontent-%COMP%]{width:50px;height:50px}.login-page__logo-text[_ngcontent-%COMP%]{font-size:1.5rem}.login-page__brand-text[_ngcontent-%COMP%]{font-size:1.25rem}}.login-page__container[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:-2px;background:linear-gradient(45deg,var(--color-primary-500),var(--color-secondary-500),var(--color-secondary-500),var(--color-primary-500));border-radius:22px;z-index:-1;animation:_ngcontent-%COMP%_borderGlow 3s ease-in-out infinite}@keyframes _ngcontent-%COMP%_borderGlow{0%,to{opacity:.5}50%{opacity:.8}}']})};export{Y as Login};
