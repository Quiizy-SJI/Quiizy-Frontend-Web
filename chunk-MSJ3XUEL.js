import{a as n}from"./chunk-LUIYB3PI.js";import{U as i,Y as r,i as o}from"./chunk-3XB4H34J.js";var s="quiizy.auth.session.v1",a=class t{constructor(e){this.storage=e;this.sessionSubject.next(this.loadSession())}sessionSubject=new o(null);session$=this.sessionSubject.asObservable();getSession(){return this.sessionSubject.value}getAccessToken(){return this.sessionSubject.value?.tokens.accessToken??null}setSession(e){this.sessionSubject.next(e),this.storage.set(s,JSON.stringify(e))}clear(){this.sessionSubject.next(null),this.storage.remove(s)}loadSession(){let e=this.storage.get(s);if(!e)return null;try{return JSON.parse(e)}catch{return this.storage.remove(s),null}}static \u0275fac=function(u){return new(u||t)(r(n))};static \u0275prov=i({token:t,factory:t.\u0275fac,providedIn:"root"})};export{a};
