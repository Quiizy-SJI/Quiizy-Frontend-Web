import{a as ie}from"./chunk-5HN4BRYP.js";import"./chunk-LSE4QE4L.js";import{b as J,c as Y,e as X,f as Z,n as ne}from"./chunk-ZPZWYV2O.js";import"./chunk-DX4RU2C5.js";import{a as G,b as ee}from"./chunk-C546SSYU.js";import{a as te}from"./chunk-KSJF27MU.js";import{b as L,c as V,f as B,h as R,l as W,n as $,t as K}from"./chunk-3OLBZRES.js";import{a as H,b as j}from"./chunk-YL2QS7YU.js";import"./chunk-HQOA22C6.js";import{d as F,h as z}from"./chunk-3WAO3F22.js";import{$a as m,Ab as x,Bb as P,Db as v,Eb as y,Fb as E,Ka as U,Tb as Q,Va as _,Wa as h,Xa as b,Xb as D,Z as S,Za as w,_a as M,a as I,ab as i,b as q,ba as u,bb as o,ca as g,cb as T,jb as f,la as C,lb as p,nb as d,p as A,rc as N,wb as k,yb as a,za as c,zb as O}from"./chunk-T26DWB6S.js";var ae=(s,t)=>t.questionId;function se(s,t){if(s&1&&(i(0,"ui-badge",16),a(1),o()),s&2){let e=d();c(),x(" Total: ",e.totalMarks()," marks ")}}function ce(s,t){s&1&&(i(0,"mat-icon",62),a(1,"check_circle"),o())}function le(s,t){if(s&1&&(i(0,"div",59)(1,"span",60),a(2),o(),i(3,"span",61),a(4),o(),_(5,ce,2,0,"mat-icon",62),o()),s&2){let e=t.$implicit,n=t.$index,r=d(2).$implicit,l=d(2);k("correct",e===r.correctAnswer),c(2),O(l.getOptionLetter(n)),c(2),O(e),c(),h(e===r.correctAnswer?5:-1)}}function de(s,t){if(s&1&&(i(0,"div",56),w(1,le,6,5,"div",58,b),o()),s&2){let e=d().$implicit;c(),M(e.proposedAnswers)}}function pe(s,t){if(s&1&&(i(0,"div",57)(1,"span",63),a(2,"Correct Answer:"),o(),i(3,"ui-badge",49),a(4),o()()),s&2){let e=d().$implicit;c(3),m("color",e.correctAnswer==="true"?"success":"danger"),c(),x(" ",e.correctAnswer==="true"?"True":"False"," ")}}function me(s,t){if(s&1){let e=f();i(0,"div",45)(1,"div",46)(2,"div",47)(3,"span",48),a(4),o(),i(5,"ui-badge",49),a(6),o(),i(7,"ui-badge",50),a(8),o()(),i(9,"div",51)(10,"ui-icon-button",52),p("clicked",function(){let r=u(e).$index,l=d(2);return g(l.editQuestion(r))}),i(11,"mat-icon"),a(12,"edit"),o()(),i(13,"ui-icon-button",53),p("clicked",function(){let r=u(e).$index,l=d(2);return g(l.duplicateQuestion(r))}),i(14,"mat-icon"),a(15,"content_copy"),o()(),i(16,"ui-icon-button",54),p("clicked",function(){let r=u(e).$index,l=d(2);return g(l.deleteQuestion(r))}),i(17,"mat-icon"),a(18,"delete"),o()()()(),i(19,"p",55),a(20),o(),_(21,de,3,0,"div",56),_(22,pe,5,2,"div",57),o()}if(s&2){let e=t.$implicit,n=t.$index,r=d(2);c(4),x("Q",n+1),c(),m("color",r.getTypeColor(e.type)),c(),x(" ",r.getTypeLabel(e.type)," "),c(2),P(" ",e.markAllocation," ",e.markAllocation===1?"mark":"marks"," "),c(12),O(e.question),c(),h(e.type!=="OPEN_ENDED"&&e.proposedAnswers.length>0?21:-1),c(),h(e.type==="TRUE_FALSE"?22:-1)}}function ue(s,t){if(s&1&&(i(0,"div",21),w(1,me,23,8,"div",45,b),o()),s&2){let e=d();c(),M(e.questions())}}function ge(s,t){if(s&1){let e=f();i(0,"div",22)(1,"mat-icon"),a(2,"quiz"),o(),i(3,"h3"),a(4,"No questions yet"),o(),i(5,"p"),a(6,"Add questions to build your quiz, or import from your question bank."),o(),i(7,"ui-button",20),p("clicked",function(){u(e);let r=d();return g(r.openQuestionModal())}),i(8,"mat-icon",19),a(9,"add"),o(),a(10," Add Your First Question "),o()()}}function _e(s,t){s&1&&(i(0,"div",23)(1,"mat-icon"),a(2,"info"),o(),i(3,"span"),a(4,"This quiz includes an open-ended question. Only "),i(5,"strong"),a(6,"one"),o(),a(7," open-ended question is allowed per quiz for sentiment analysis."),o()())}function he(s,t){s&1&&(i(0,"div",31)(1,"mat-icon"),a(2,"warning"),o(),i(3,"span"),a(4,"Only one open-ended question is allowed per quiz."),o()())}function Ce(s,t){if(s&1){let e=f();i(0,"ui-icon-button",71),p("clicked",function(){u(e);let r=d().$index,l=d(2);return g(l.removeOption(r))}),i(1,"mat-icon"),a(2,"close"),o()()}}function xe(s,t){if(s&1){let e=f();i(0,"div",66)(1,"input",68),p("change",function(){let r=u(e).$index,l=d(2);return g(l.setCorrectAnswer(l.currentQuestion.proposedAnswers[r]))}),o(),i(2,"input",69),p("focus",function(){let r=u(e).$index,l=d(2);return g(l.captureOptionValue(r))})("input",function(r){let l=u(e).$index,re=d(2);return g(re.updateOptionText(l,r))}),o(),_(3,Ce,3,0,"ui-icon-button",70),o()}if(s&2){let e=t.$index,n=d(2);c(),m("name","correct-answer")("value",n.currentQuestion.proposedAnswers[e])("checked",n.currentQuestion.correctAnswer===n.currentQuestion.proposedAnswers[e]),c(),m("placeholder","Option "+n.getOptionLetter(e))("value",n.currentQuestion.proposedAnswers[e])("name","option-"+e),c(),h(n.currentQuestion.proposedAnswers.length>2?3:-1)}}function fe(s,t){if(s&1){let e=f();i(0,"ui-button",72),p("clicked",function(){u(e);let r=d(2);return g(r.addOption())}),i(1,"mat-icon",19),a(2,"add"),o(),a(3," Add Option "),o()}}function ve(s,t){if(s&1&&(i(0,"div",33)(1,"label",64),a(2,"Answer Options"),o(),i(3,"p",65),a(4,"Select the correct answer using the radio button."),o(),w(5,xe,4,7,"div",66,b),_(7,fe,4,0,"ui-button",67),o()),s&2){let e=d();c(5),M(e.currentQuestion.proposedAnswers),c(2),h(e.currentQuestion.proposedAnswers.length<6?7:-1)}}function ye(s,t){if(s&1){let e=f();i(0,"div",34)(1,"label",73),a(2,"Correct Answer"),o(),i(3,"div",74)(4,"label",75)(5,"input",76),E("ngModelChange",function(r){u(e);let l=d();return y(l.currentQuestion.correctAnswer,r)||(l.currentQuestion.correctAnswer=r),g(r)}),o(),i(6,"span"),a(7,"True"),o()(),i(8,"label",75)(9,"input",77),E("ngModelChange",function(r){u(e);let l=d();return y(l.currentQuestion.correctAnswer,r)||(l.currentQuestion.correctAnswer=r),g(r)}),o(),i(10,"span"),a(11,"False"),o()()()()}if(s&2){let e=d();c(5),v("ngModel",e.currentQuestion.correctAnswer),c(4),v("ngModel",e.currentQuestion.correctAnswer)}}function Ee(s,t){s&1&&(i(0,"div",40),T(1,"ui-spinner",78),i(2,"span"),a(3,"Loading questions..."),o()())}function we(s,t){if(s&1){let e=f();i(0,"label",80)(1,"input",81),p("change",function(){let r=u(e).$implicit,l=d(2);return g(l.toggleImportSelection(r.questionId))}),o(),i(2,"div",82)(3,"p",83),a(4),o(),i(5,"div",84)(6,"ui-badge",49),a(7),o(),i(8,"span",85),a(9),o()()()()}if(s&2){let e=t.$implicit,n=d(2);k("selected",n.selectedImportIds().includes(e.questionId)),c(),m("checked",n.selectedImportIds().includes(e.questionId))("disabled",e.type==="OPEN_ENDED"&&n.hasOpenEnded()&&!n.selectedImportIds().includes(e.questionId)),c(3),O(e.question),c(2),m("color",n.getTypeColor(e.type)),c(),x(" ",n.getTypeLabel(e.type)," "),c(2),P("",e.difficultyLevel||"Unknown"," \u2022 Used ",e.usageCount||0," times")}}function Me(s,t){if(s&1&&(i(0,"div",41),w(1,we,10,9,"label",79,ae),o()),s&2){let e=d();c(),M(e.pastQuestions())}}function Oe(s,t){s&1&&(i(0,"div",42)(1,"mat-icon"),a(2,"search_off"),o(),i(3,"p"),a(4,"No past questions found for this teaching unit."),o()())}var oe=class s{teacherApi=S(ie);router=S(F);cdr=S(D);questions=C([]);showQuestionModal=C(!1);showImportModal=C(!1);editingIndex=C(-1);isLoadingQuestions=C(!1);teachingUnits=C([]);selectedTeachingUnitId="";pastQuestions=C([]);selectedImportIds=C([]);currentQuestion=this.getEmptyQuestion();previousOptionValue="";questionTypeOptions=[{value:"SINGLE_CHOICE",label:"Multiple Choice (Single Answer)"},{value:"MULTIPLE_CHOICE",label:"Multiple Choice (Multiple Answers)"},{value:"TRUE_FALSE",label:"True / False"},{value:"OPEN_ENDED",label:"Open Ended (Essay)"}];totalMarks=Q(()=>this.questions().reduce((t,e)=>t+e.markAllocation,0));hasOpenEnded=Q(()=>this.questions().some(t=>t.type==="OPEN_ENDED"));teachingUnitOptions=Q(()=>this.teachingUnits().map(t=>({value:t.id,label:t.name})));async ngOnInit(){this.loadSavedQuestions(),await this.loadTeachingUnits();try{let t=sessionStorage.getItem("examFormStep1");if(t){let e=JSON.parse(t||"{}");e&&e.teachingUnitId&&(this.selectedTeachingUnitId=String(e.teachingUnitId))}}catch{}!this.selectedTeachingUnitId&&this.teachingUnits().length>0&&(this.selectedTeachingUnitId=this.teachingUnits()[0].id),this.selectedTeachingUnitId&&await this.loadPastQuestions()}loadSavedQuestions(){let t=sessionStorage.getItem("examFormStep2");if(t)try{let e=JSON.parse(t);e.questions&&Array.isArray(e.questions)&&this.questions.set(e.questions)}catch{}}async loadTeachingUnits(){try{let t=await A(this.teacherApi.getMyTeachingUnits());this.teachingUnits.set(t)}catch(t){console.error("Failed to load teaching units:",t)}}getEmptyQuestion(){return{question:"",type:"SINGLE_CHOICE",proposedAnswers:["","","",""],correctAnswer:"",markAllocation:1}}getOptionLetter(t){return String.fromCharCode(65+t)}getTypeLabel(t){return{SINGLE_CHOICE:"Single Choice",MULTIPLE_CHOICE:"Multi-Select",TRUE_FALSE:"True/False",OPEN_ENDED:"Essay"}[t]||t}getTypeColor(t){return{SINGLE_CHOICE:"primary",MULTIPLE_CHOICE:"secondary",TRUE_FALSE:"info",OPEN_ENDED:"warning"}[t]||"neutral"}openQuestionModal(){this.editingIndex.set(-1),this.currentQuestion=this.getEmptyQuestion(),this.showQuestionModal.set(!0)}closeQuestionModal(){this.showQuestionModal.set(!1),this.editingIndex.set(-1)}editQuestion(t){let e=this.questions()[t];this.editingIndex.set(t),this.currentQuestion=q(I({},e),{proposedAnswers:[...e.proposedAnswers]}),this.showQuestionModal.set(!0)}duplicateQuestion(t){let e=this.questions()[t],n=q(I({},e),{proposedAnswers:[...e.proposedAnswers]});this.questions.update(r=>[...r.slice(0,t+1),n,...r.slice(t+1)])}deleteQuestion(t){confirm("Delete this question?")&&this.questions.update(e=>e.filter((n,r)=>r!==t))}onQuestionTypeChange(){this.currentQuestion.type==="TRUE_FALSE"?(this.currentQuestion.proposedAnswers=[],this.currentQuestion.correctAnswer="true"):this.currentQuestion.type==="OPEN_ENDED"?(this.currentQuestion.proposedAnswers=[],this.currentQuestion.correctAnswer=""):this.currentQuestion.proposedAnswers.length===0&&(this.currentQuestion.proposedAnswers=["","","",""],this.currentQuestion.correctAnswer="")}setCorrectAnswer(t){this.currentQuestion.correctAnswer=t}captureOptionValue(t){this.previousOptionValue=this.currentQuestion.proposedAnswers[t]}updateOptionText(t,e){let r=e.target.value;this.currentQuestion.correctAnswer===this.previousOptionValue&&(this.currentQuestion.correctAnswer=r),this.currentQuestion.proposedAnswers[t]=r,this.previousOptionValue=r}updateCorrectAnswerIfNeeded(t,e){this.currentQuestion.correctAnswer===e&&(this.currentQuestion.correctAnswer=this.currentQuestion.proposedAnswers[t])}addOption(){this.currentQuestion.proposedAnswers.length<6&&this.currentQuestion.proposedAnswers.push("")}removeOption(t){if(this.currentQuestion.proposedAnswers.length>2){let e=this.currentQuestion.proposedAnswers[t];this.currentQuestion.proposedAnswers.splice(t,1),this.currentQuestion.correctAnswer===e&&(this.currentQuestion.correctAnswer="")}}isQuestionValid(){let t=this.currentQuestion;if(!t.question.trim()||t.markAllocation<1)return!1;if(t.type==="OPEN_ENDED"){let n=this.editingIndex()>=0&&this.questions()[this.editingIndex()].type==="OPEN_ENDED";if(this.hasOpenEnded()&&!n)return!1}if(t.type==="SINGLE_CHOICE"||t.type==="MULTIPLE_CHOICE"){let e=t.proposedAnswers.filter(n=>n.trim());if(e.length<2||!t.correctAnswer||!e.includes(t.correctAnswer))return!1}return!(t.type==="TRUE_FALSE"&&t.correctAnswer!=="true"&&t.correctAnswer!=="false")}saveQuestion(){if(!this.isQuestionValid())return;let t={question:String(this.currentQuestion.question).trim(),type:String(this.currentQuestion.type),proposedAnswers:this.currentQuestion.proposedAnswers.map(e=>String(e).trim()).filter(e=>e.length>0),correctAnswer:String(this.currentQuestion.correctAnswer||""),markAllocation:Number(this.currentQuestion.markAllocation)||1};this.editingIndex()>=0?this.questions.update(e=>e.map((n,r)=>r===this.editingIndex()?t:n)):this.questions.update(e=>[...e,t]),this.closeQuestionModal()}openImportModal(){this.selectedImportIds.set([]),this.showImportModal.set(!0),this.teachingUnits().length>0&&!this.selectedTeachingUnitId&&(this.selectedTeachingUnitId=this.teachingUnits()[0].id,this.loadPastQuestions())}closeImportModal(){this.showImportModal.set(!1),this.selectedImportIds.set([])}async loadPastQuestions(){if(!this.selectedTeachingUnitId){this.pastQuestions.set([]);return}this.isLoadingQuestions.set(!0);try{let t=await A(this.teacherApi.getTeachingUnitPastQuestions(this.selectedTeachingUnitId));this.pastQuestions.set(t.questions)}catch(t){console.error("Failed to load past questions:",t),this.pastQuestions.set([])}finally{this.isLoadingQuestions.set(!1)}}toggleImportSelection(t){this.selectedImportIds.update(e=>e.includes(t)?e.filter(n=>n!==t):[...e,t])}importSelectedQuestions(){let t=this.pastQuestions().filter(r=>this.selectedImportIds().includes(r.questionId));if(t.some(r=>r.type==="OPEN_ENDED")&&this.hasOpenEnded()){alert("Cannot import an open-ended question - one already exists in this quiz.");return}let n=t.map(r=>({question:r.question,type:r.type,proposedAnswers:r.proposedAnswers??[],correctAnswer:r.correctAnswer??"",markAllocation:1}));this.questions.update(r=>[...r,...n]),this.closeImportModal()}goBack(){this.saveToSession(),this.persistSelectedTeachingUnitToStep1(),this.router.navigate(["/teacher/create-exam"])}nextStep(){this.questions().length!==0&&(this.saveToSession(),this.persistSelectedTeachingUnitToStep1(),this.router.navigate(["/teacher/create-exam/step3"]))}saveToSession(){sessionStorage.setItem("examFormStep2",JSON.stringify({questions:this.questions()}))}persistSelectedTeachingUnitToStep1(){try{let t=sessionStorage.getItem("examFormStep1"),e=t?JSON.parse(t):{};if(this.selectedTeachingUnitId){e.teachingUnitId=String(this.selectedTeachingUnitId);let n=this.teachingUnits().find(r=>r.id===this.selectedTeachingUnitId);n?.name&&(e.teachingUnitName=n.name),sessionStorage.setItem("examFormStep1",JSON.stringify(e))}}catch{}}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=U({type:s,selectors:[["app-teacher-create-exam-step2"]],decls:89,vars:30,consts:[[1,"create-exam-step2"],[1,"page-header"],["variant","elevated",1,"stepper-card"],[1,"progress-stepper"],[1,"step","completed"],[1,"step-number"],[1,"step-info"],[1,"step-title"],[1,"step-desc"],[1,"step-connector","completed"],[1,"step","active"],[1,"step-connector"],[1,"step"],["variant","elevated"],[1,"questions-header"],[1,"questions-title"],["color","primary","size","sm"],[1,"questions-actions"],["variant","outline","color","primary",3,"clicked"],["slot","icon-left"],["variant","solid","color","primary",3,"clicked"],[1,"questions-list"],[1,"empty-state"],[1,"info-banner"],[1,"form-actions"],["variant","outline","color","neutral",3,"clicked"],["variant","solid","color","primary",3,"clicked","disabled"],["slot","icon-right"],["size","lg",3,"closed","isOpen","title","showFooter"],[1,"modal-form"],["label","Question Type","name","questionType",3,"ngModelChange","options","ngModel"],[1,"warning-banner"],["label","Question Text","placeholder","Enter your question...","name","questionText",3,"ngModelChange","required","ngModel","rows"],[1,"options-section"],[1,"tf-section"],["type","number","label","Mark Allocation","placeholder","1","name","markAllocation","helperText","Points awarded for correct answer",3,"ngModelChange","required","min","ngModel"],["slot","footer",1,"modal-footer"],["title","Import from Question Bank","size","lg",3,"closed","isOpen","showFooter"],[1,"import-content"],["label","Teaching Unit","placeholder","Select a teaching unit","name","teachingUnit",3,"ngModelChange","options","ngModel"],[1,"loading-state"],[1,"import-list"],[1,"empty-import"],[1,"selection-count"],[1,"modal-footer-actions"],[1,"question-card"],[1,"question-header"],[1,"question-meta"],[1,"question-number"],["size","sm",3,"color"],["color","neutral","size","sm"],[1,"question-actions"],["size","md","variant","outline","color","primary","ariaLabel","Edit question",3,"clicked"],["size","md","variant","outline","color","secondary","ariaLabel","Duplicate question",3,"clicked"],["size","md","variant","outline","color","danger","ariaLabel","Delete question",3,"clicked"],[1,"question-text"],[1,"options-preview"],[1,"tf-answer"],[1,"option",3,"correct"],[1,"option"],[1,"option-letter"],[1,"option-text"],[1,"correct-icon"],[1,"answer-label"],[1,"options-label"],[1,"options-hint"],[1,"option-row"],["variant","outline","color","neutral","size","sm"],["type","radio",3,"change","name","value","checked"],["type","text",1,"option-input",3,"focus","input","placeholder","value","name"],["size","md","variant","outline","color","danger","ariaLabel","Remove option"],["size","md","variant","outline","color","danger","ariaLabel","Remove option",3,"clicked"],["variant","outline","color","neutral","size","sm",3,"clicked"],[1,"tf-label"],[1,"tf-options"],[1,"tf-option"],["type","radio","name","tf-answer","value","true",3,"ngModelChange","ngModel"],["type","radio","name","tf-answer","value","false",3,"ngModelChange","ngModel"],["size","md"],[1,"import-item",3,"selected"],[1,"import-item"],["type","checkbox",3,"change","checked","disabled"],[1,"import-item-content"],[1,"import-question"],[1,"import-meta"],[1,"import-source"]],template:function(e,n){e&1&&(i(0,"div",0)(1,"div",1)(2,"h1"),a(3,"Add Questions"),o(),i(4,"p"),a(5,"Build your quiz by adding questions or importing from your question bank."),o()(),i(6,"ui-card",2)(7,"div",3)(8,"div",4)(9,"div",5)(10,"mat-icon"),a(11,"check"),o()(),i(12,"div",6)(13,"span",7),a(14,"Quiz Details"),o(),i(15,"span",8),a(16,"Course, type & schedule"),o()()(),T(17,"div",9),i(18,"div",10)(19,"div",5),a(20,"2"),o(),i(21,"div",6)(22,"span",7),a(23,"Add Questions"),o(),i(24,"span",8),a(25,"Build your quiz"),o()()(),T(26,"div",11),i(27,"div",12)(28,"div",5),a(29,"3"),o(),i(30,"div",6)(31,"span",7),a(32,"Review & Publish"),o(),i(33,"span",8),a(34,"Final review"),o()()()()(),i(35,"ui-card",13)(36,"div",14)(37,"div",15)(38,"h2"),a(39),o(),_(40,se,2,1,"ui-badge",16),o(),i(41,"div",17)(42,"ui-button",18),p("clicked",function(){return n.openImportModal()}),i(43,"mat-icon",19),a(44,"library_books"),o(),a(45," Import from Bank "),o(),i(46,"ui-button",20),p("clicked",function(){return n.openQuestionModal()}),i(47,"mat-icon",19),a(48,"add"),o(),a(49," Add Question "),o()()(),_(50,ue,3,0,"div",21)(51,ge,11,0,"div",22),_(52,_e,8,0,"div",23),o(),i(53,"div",24)(54,"ui-button",25),p("clicked",function(){return n.goBack()}),i(55,"mat-icon",19),a(56,"arrow_back"),o(),a(57," Back "),o(),i(58,"ui-button",26),p("clicked",function(){return n.nextStep()}),a(59," Next: Review & Publish "),i(60,"mat-icon",27),a(61,"arrow_forward"),o()()(),i(62,"ui-modal",28),p("closed",function(){return n.closeQuestionModal()}),i(63,"div",29)(64,"ui-select",30),E("ngModelChange",function(l){return y(n.currentQuestion.type,l)||(n.currentQuestion.type=l),l}),p("ngModelChange",function(){return n.onQuestionTypeChange()}),o(),_(65,he,5,0,"div",31),i(66,"ui-textarea",32),E("ngModelChange",function(l){return y(n.currentQuestion.question,l)||(n.currentQuestion.question=l),l}),o(),_(67,ve,8,1,"div",33),_(68,ye,12,2,"div",34),i(69,"ui-input",35),E("ngModelChange",function(l){return y(n.currentQuestion.markAllocation,l)||(n.currentQuestion.markAllocation=l),l}),o()(),i(70,"div",36)(71,"ui-button",25),p("clicked",function(){return n.closeQuestionModal()}),a(72," Cancel "),o(),i(73,"ui-button",26),p("clicked",function(){return n.saveQuestion()}),a(74),o()()(),i(75,"ui-modal",37),p("closed",function(){return n.closeImportModal()}),i(76,"div",38)(77,"ui-select",39),E("ngModelChange",function(l){return y(n.selectedTeachingUnitId,l)||(n.selectedTeachingUnitId=l),l}),p("ngModelChange",function(){return n.loadPastQuestions()}),o(),_(78,Ee,4,0,"div",40)(79,Me,3,0,"div",41)(80,Oe,5,0,"div",42),o(),i(81,"div",36)(82,"span",43),a(83),o(),i(84,"div",44)(85,"ui-button",25),p("clicked",function(){return n.closeImportModal()}),a(86," Cancel "),o(),i(87,"ui-button",26),p("clicked",function(){return n.importSelectedQuestions()}),a(88),o()()()()()),e&2&&(c(39),x("Questions (",n.questions().length,")"),c(),h(n.questions().length>0?40:-1),c(10),h(n.questions().length>0?50:51),c(2),h(n.hasOpenEnded()?52:-1),c(6),m("disabled",n.questions().length===0),c(4),m("isOpen",n.showQuestionModal())("title",n.editingIndex()>=0?"Edit Question":"Add Question")("showFooter",!0),c(2),m("options",n.questionTypeOptions),v("ngModel",n.currentQuestion.type),c(),h(n.currentQuestion.type==="OPEN_ENDED"&&n.hasOpenEnded()&&n.editingIndex()<0?65:-1),c(),m("required",!0),v("ngModel",n.currentQuestion.question),m("rows",3),c(),h(n.currentQuestion.type==="SINGLE_CHOICE"||n.currentQuestion.type==="MULTIPLE_CHOICE"?67:-1),c(),h(n.currentQuestion.type==="TRUE_FALSE"?68:-1),c(),m("required",!0)("min",1),v("ngModel",n.currentQuestion.markAllocation),c(4),m("disabled",!n.isQuestionValid()),c(),x(" ",n.editingIndex()>=0?"Update":"Add"," Question "),c(),m("isOpen",n.showImportModal())("showFooter",!0),c(2),m("options",n.teachingUnitOptions()),v("ngModel",n.selectedTeachingUnitId),c(),h(n.isLoadingQuestions()?78:n.pastQuestions().length>0?79:n.selectedTeachingUnitId?80:-1),c(5),x("",n.selectedImportIds().length," selected"),c(4),m("disabled",n.selectedImportIds().length===0),c(),P(" Import ",n.selectedImportIds().length," Question",n.selectedImportIds().length===1?"":"s"," "))},dependencies:[N,j,H,z,$,L,R,V,W,B,ee,G,K,Z,X,te,ne,Y,J],styles:[".create-exam-step2[_ngcontent-%COMP%]{max-width:900px;margin:0 auto;padding:1.5rem}.page-header[_ngcontent-%COMP%]{margin-bottom:1.5rem}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:600;margin-bottom:.5rem;color:var(--color-text-primary)}.page-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--color-text-secondary);font-size:.938rem}.stepper-card[_ngcontent-%COMP%]{margin-bottom:1.5rem}.progress-stepper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:1rem 0}@media (max-width: 640px){.progress-stepper[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}}.step[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.step[_ngcontent-%COMP%]   .step-number[_ngcontent-%COMP%]{width:2.25rem;height:2.25rem;border-radius:50%;background:var(--color-background-muted);color:var(--color-text-secondary);display:flex;align-items:center;justify-content:center;font-weight:600;font-size:.938rem}.step[_ngcontent-%COMP%]   .step-number[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.25rem;width:1.25rem;height:1.25rem}.step.active[_ngcontent-%COMP%]   .step-number[_ngcontent-%COMP%]{background:var(--color-primary-600);color:#fff}.step.completed[_ngcontent-%COMP%]   .step-number[_ngcontent-%COMP%]{background:var(--color-success-600);color:#fff}.step[_ngcontent-%COMP%]   .step-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.step[_ngcontent-%COMP%]   .step-title[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--color-text-primary)}.step.active[_ngcontent-%COMP%]   .step-title[_ngcontent-%COMP%]{color:var(--color-primary-600);font-weight:600}.step[_ngcontent-%COMP%]   .step-desc[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-tertiary)}.step-connector[_ngcontent-%COMP%]{flex:1;height:2px;background:var(--color-border-default);margin:0 1.5rem;max-width:80px}.step-connector.completed[_ngcontent-%COMP%]{background:var(--color-success-600)}@media (max-width: 640px){.step-connector[_ngcontent-%COMP%]{display:none}}.questions-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;flex-wrap:wrap;gap:1rem}.questions-header[_ngcontent-%COMP%]   .questions-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.questions-header[_ngcontent-%COMP%]   .questions-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:var(--color-text-primary);margin:0}.questions-header[_ngcontent-%COMP%]   .questions-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.questions-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.question-card[_ngcontent-%COMP%]{padding:1.25rem;border:1px solid var(--color-border-default);border-radius:10px;background:var(--surface-base);transition:border-color .2s ease}.question-card[_ngcontent-%COMP%]:hover{border-color:var(--color-primary-300)}.question-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.75rem}.question-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.question-meta[_ngcontent-%COMP%]   .question-number[_ngcontent-%COMP%]{font-weight:600;color:var(--color-primary-600);font-size:.938rem}.question-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.question-text[_ngcontent-%COMP%]{font-size:1rem;color:var(--color-text-primary);margin-bottom:1rem;line-height:1.5}.options-preview[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.option[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.625rem .875rem;border:1px solid var(--color-border-default);border-radius:6px;font-size:.875rem}.option.correct[_ngcontent-%COMP%]{background:var(--color-success-50);border-color:var(--color-success-300)}.option[_ngcontent-%COMP%]   .option-letter[_ngcontent-%COMP%]{font-weight:600;color:var(--color-text-secondary);min-width:1.5rem}.option[_ngcontent-%COMP%]   .option-text[_ngcontent-%COMP%]{flex:1;color:var(--color-text-primary)}.option[_ngcontent-%COMP%]   .correct-icon[_ngcontent-%COMP%]{color:var(--color-success-600);font-size:1.125rem;width:1.125rem;height:1.125rem}.tf-answer[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.tf-answer[_ngcontent-%COMP%]   .answer-label[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-secondary)}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:3rem 1.5rem}.empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:3.5rem;width:3.5rem;height:3.5rem;color:var(--color-text-tertiary);margin-bottom:1rem}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:var(--color-text-primary);margin-bottom:.5rem}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--color-text-secondary);margin-bottom:1.5rem}.info-banner[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;margin-top:1.5rem;padding:.875rem 1rem;background:var(--color-info-50);border:1px solid var(--color-info-200);border-radius:8px;font-size:.875rem;color:var(--color-info-700)}.info-banner[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--color-info-500);font-size:1.25rem;width:1.25rem;height:1.25rem;flex-shrink:0}.warning-banner[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:.875rem 1rem;background:var(--color-warning-50);border:1px solid var(--color-warning-200);border-radius:8px;font-size:.875rem;color:var(--color-warning-700);margin-bottom:1rem}.warning-banner[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--color-warning-500);font-size:1.25rem;width:1.25rem;height:1.25rem;flex-shrink:0}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:1.5rem;padding-top:1.5rem;border-top:1px solid var(--color-border-subtle)}.modal-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.25rem}.options-section[_ngcontent-%COMP%]   .options-label[_ngcontent-%COMP%]{display:block;font-size:.875rem;font-weight:500;color:var(--color-text-primary);margin-bottom:.25rem}.options-section[_ngcontent-%COMP%]   .options-hint[_ngcontent-%COMP%]{font-size:.813rem;color:var(--color-text-secondary);margin-bottom:.75rem}.option-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-bottom:.5rem}.option-row[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{margin:0;width:1.125rem;height:1.125rem;cursor:pointer}.option-row[_ngcontent-%COMP%]   .option-input[_ngcontent-%COMP%]{flex:1;padding:.625rem .875rem;border:1px solid var(--color-border-default);border-radius:6px;font-size:.875rem;transition:border-color .2s ease}.option-row[_ngcontent-%COMP%]   .option-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary-500)}.tf-section[_ngcontent-%COMP%]   .tf-label[_ngcontent-%COMP%]{display:block;font-size:.875rem;font-weight:500;color:var(--color-text-primary);margin-bottom:.75rem}.tf-section[_ngcontent-%COMP%]   .tf-options[_ngcontent-%COMP%]{display:flex;gap:1.5rem}.tf-section[_ngcontent-%COMP%]   .tf-option[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;cursor:pointer}.tf-section[_ngcontent-%COMP%]   .tf-option[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{margin:0;width:1.125rem;height:1.125rem}.tf-section[_ngcontent-%COMP%]   .tf-option[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.938rem;color:var(--color-text-primary)}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.75rem}.import-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:.75rem;padding:2rem;color:var(--color-text-secondary)}.import-list[_ngcontent-%COMP%]{max-height:400px;overflow-y:auto;border:1px solid var(--color-border-default);border-radius:8px}.import-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:.75rem;padding:1rem;border-bottom:1px solid var(--color-border-subtle);cursor:pointer;transition:background .15s ease}.import-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.import-item[_ngcontent-%COMP%]:hover{background:var(--color-background-subtle)}.import-item.selected[_ngcontent-%COMP%]{background:var(--color-primary-50)}.import-item[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin-top:.25rem;width:1.125rem;height:1.125rem;cursor:pointer}.import-item[_ngcontent-%COMP%]   .import-item-content[_ngcontent-%COMP%]{flex:1}.import-item[_ngcontent-%COMP%]   .import-question[_ngcontent-%COMP%]{font-size:.938rem;color:var(--color-text-primary);margin-bottom:.5rem;line-height:1.4}.import-item[_ngcontent-%COMP%]   .import-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;flex-wrap:wrap}.import-item[_ngcontent-%COMP%]   .import-source[_ngcontent-%COMP%]{font-size:.813rem;color:var(--color-text-tertiary)}.empty-import[_ngcontent-%COMP%]{text-align:center;padding:2.5rem 1.5rem;color:var(--color-text-secondary)}.empty-import[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:2.5rem;width:2.5rem;height:2.5rem;margin-bottom:.75rem;color:var(--color-text-tertiary)}.empty-import[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.selection-count[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-secondary)}.modal-footer-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem}[_nghost-%COMP%]     ui-card{margin-bottom:1.5rem}[_nghost-%COMP%]     .card__body{padding:1.5rem}"]})};export{oe as TeacherCreateExamStep2};
